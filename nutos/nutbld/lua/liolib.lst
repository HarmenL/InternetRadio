GAS LISTING /tmp/ccSoRxjN.s 			page 1


   1               		.file	"liolib.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.section	.rodata.str1.1,"aMS",@progbits,1
   9               	.LC0:
  10 0000 4572 726F 		.string	"Error"
  10      7200 
  11               	.LC1:
  12 0006 2573 3A20 		.string	"%s: %s"
  12      2573 00
  13               	.LC2:
  14 000d 2573 00   		.string	"%s"
  15               		.section	.text.pushresult,"ax",@progbits
  16               		.type	pushresult, @function
  17               	pushresult:
  18 0000 EF92      		push r14
  19 0002 FF92      		push r15
  20 0004 0F93      		push r16
  21 0006 1F93      		push r17
  22 0008 CF93      		push r28
  23 000a DF93      		push r29
  24               	/* prologue: function */
  25               	/* frame size = 0 */
  26               	/* stack size = 6 */
  27               	.L__stack_usage = 6
  28 000c D82F      		mov r29,r24
  29 000e C92F      		mov r28,r25
  30 0010 8A01      		movw r16,r20
  31 0012 672B      		or r22,r23
  32 0014 01F0      		breq .L2
  33 0016 61E0      		ldi r22,lo8(1)
  34 0018 70E0      		ldi r23,0
  35 001a 0E94 0000 		call lua_pushboolean
  36 001e 81E0      		ldi r24,lo8(1)
  37 0020 90E0      		ldi r25,0
  38 0022 00C0      		rjmp .L3
  39               	.L2:
  40 0024 E090 0000 		lds r14,errno
  41 0028 F090 0000 		lds r15,errno+1
  42 002c 0E94 0000 		call lua_pushnil
  43 0030 80E0      		ldi r24,lo8(.LC0)
  44 0032 90E0      		ldi r25,hi8(.LC0)
  45 0034 0115      		cp r16,__zero_reg__
  46 0036 1105      		cpc r17,__zero_reg__
  47 0038 01F0      		breq .L4
  48 003a 9F93      		push r25
  49 003c 8F93      		push r24
  50 003e 1F93      		push r17
  51 0040 0F93      		push r16
  52 0042 80E0      		ldi r24,lo8(.LC1)
  53 0044 90E0      		ldi r25,hi8(.LC1)
  54 0046 9F93      		push r25
  55 0048 8F93      		push r24
GAS LISTING /tmp/ccSoRxjN.s 			page 2


  56 004a CF93      		push r28
  57 004c DF93      		push r29
  58 004e 0E94 0000 		call lua_pushfstring
  59 0052 8DB7      		in r24,__SP_L__
  60 0054 9EB7      		in r25,__SP_H__
  61 0056 0896      		adiw r24,8
  62 0058 0FB6      		in __tmp_reg__,__SREG__
  63 005a F894      		cli
  64 005c 9EBF      		out __SP_H__,r25
  65 005e 0FBE      		out __SREG__,__tmp_reg__
  66 0060 8DBF      		out __SP_L__,r24
  67 0062 00C0      		rjmp .L5
  68               	.L4:
  69 0064 9F93      		push r25
  70 0066 8F93      		push r24
  71 0068 80E0      		ldi r24,lo8(.LC2)
  72 006a 90E0      		ldi r25,hi8(.LC2)
  73 006c 9F93      		push r25
  74 006e 8F93      		push r24
  75 0070 CF93      		push r28
  76 0072 DF93      		push r29
  77 0074 0E94 0000 		call lua_pushfstring
  78 0078 0F90      		pop __tmp_reg__
  79 007a 0F90      		pop __tmp_reg__
  80 007c 0F90      		pop __tmp_reg__
  81 007e 0F90      		pop __tmp_reg__
  82 0080 0F90      		pop __tmp_reg__
  83 0082 0F90      		pop __tmp_reg__
  84               	.L5:
  85 0084 B701      		movw r22,r14
  86 0086 8D2F      		mov r24,r29
  87 0088 9C2F      		mov r25,r28
  88 008a 0E94 0000 		call lua_pushinteger
  89 008e 83E0      		ldi r24,lo8(3)
  90 0090 90E0      		ldi r25,0
  91               	.L3:
  92               	/* epilogue start */
  93 0092 DF91      		pop r29
  94 0094 CF91      		pop r28
  95 0096 1F91      		pop r17
  96 0098 0F91      		pop r16
  97 009a FF90      		pop r15
  98 009c EF90      		pop r14
  99 009e 0895      		ret
 100               		.size	pushresult, .-pushresult
 101               		.section	.rodata.str1.1
 102               	.LC3:
 103 0010 4649 4C45 		.string	"FILE*"
 103      2A00 
 104               		.section	.text.io_pclose,"ax",@progbits
 105               		.type	io_pclose, @function
 106               	io_pclose:
 107 0000 CF93      		push r28
 108 0002 DF93      		push r29
 109               	/* prologue: function */
 110               	/* frame size = 0 */
 111               	/* stack size = 2 */
GAS LISTING /tmp/ccSoRxjN.s 			page 3


 112               	.L__stack_usage = 2
 113 0004 EC01      		movw r28,r24
 114 0006 40E0      		ldi r20,lo8(.LC3)
 115 0008 50E0      		ldi r21,hi8(.LC3)
 116 000a 61E0      		ldi r22,lo8(1)
 117 000c 70E0      		ldi r23,0
 118 000e 0E94 0000 		call luaL_checkudata
 119 0012 FC01      		movw r30,r24
 120 0014 1182      		std Z+1,__zero_reg__
 121 0016 1082      		st Z,__zero_reg__
 122 0018 40E0      		ldi r20,0
 123 001a 50E0      		ldi r21,0
 124 001c 60E0      		ldi r22,0
 125 001e 70E0      		ldi r23,0
 126 0020 CE01      		movw r24,r28
 127               	/* epilogue start */
 128 0022 DF91      		pop r29
 129 0024 CF91      		pop r28
 130 0026 0C94 0000 		jmp pushresult
 131               		.size	io_pclose, .-io_pclose
 132               		.section	.rodata.str1.1
 133               	.LC4:
 134 0016 6361 6E6E 		.string	"cannot close standard file"
 134      6F74 2063 
 134      6C6F 7365 
 134      2073 7461 
 134      6E64 6172 
 135               		.section	.text.io_noclose,"ax",@progbits
 136               		.type	io_noclose, @function
 137               	io_noclose:
 138 0000 CF93      		push r28
 139 0002 DF93      		push r29
 140               	/* prologue: function */
 141               	/* frame size = 0 */
 142               	/* stack size = 2 */
 143               	.L__stack_usage = 2
 144 0004 EC01      		movw r28,r24
 145 0006 0E94 0000 		call lua_pushnil
 146 000a 4AE1      		ldi r20,lo8(26)
 147 000c 50E0      		ldi r21,0
 148 000e 60E0      		ldi r22,lo8(.LC4)
 149 0010 70E0      		ldi r23,hi8(.LC4)
 150 0012 CE01      		movw r24,r28
 151 0014 0E94 0000 		call lua_pushlstring
 152 0018 82E0      		ldi r24,lo8(2)
 153 001a 90E0      		ldi r25,0
 154               	/* epilogue start */
 155 001c DF91      		pop r29
 156 001e CF91      		pop r28
 157 0020 0895      		ret
 158               		.size	io_noclose, .-io_noclose
 159               		.section	.rodata.str1.1
 160               	.LC5:
 161 0031 6174 7465 		.string	"attempt to use a closed file"
 161      6D70 7420 
 161      746F 2075 
 161      7365 2061 
GAS LISTING /tmp/ccSoRxjN.s 			page 4


 161      2063 6C6F 
 162               		.section	.text.tofile,"ax",@progbits
 163               		.type	tofile, @function
 164               	tofile:
 165 0000 0F93      		push r16
 166 0002 1F93      		push r17
 167 0004 CF93      		push r28
 168 0006 DF93      		push r29
 169               	/* prologue: function */
 170               	/* frame size = 0 */
 171               	/* stack size = 4 */
 172               	.L__stack_usage = 4
 173 0008 182F      		mov r17,r24
 174 000a 092F      		mov r16,r25
 175 000c 40E0      		ldi r20,lo8(.LC3)
 176 000e 50E0      		ldi r21,hi8(.LC3)
 177 0010 61E0      		ldi r22,lo8(1)
 178 0012 70E0      		ldi r23,0
 179 0014 0E94 0000 		call luaL_checkudata
 180 0018 EC01      		movw r28,r24
 181 001a 8881      		ld r24,Y
 182 001c 9981      		ldd r25,Y+1
 183 001e 892B      		or r24,r25
 184 0020 01F4      		brne .L10
 185 0022 80E0      		ldi r24,lo8(.LC5)
 186 0024 90E0      		ldi r25,hi8(.LC5)
 187 0026 9F93      		push r25
 188 0028 8F93      		push r24
 189 002a 0F93      		push r16
 190 002c 1F93      		push r17
 191 002e 0E94 0000 		call luaL_error
 192 0032 0F90      		pop __tmp_reg__
 193 0034 0F90      		pop __tmp_reg__
 194 0036 0F90      		pop __tmp_reg__
 195 0038 0F90      		pop __tmp_reg__
 196               	.L10:
 197 003a 8881      		ld r24,Y
 198 003c 9981      		ldd r25,Y+1
 199               	/* epilogue start */
 200 003e DF91      		pop r29
 201 0040 CF91      		pop r28
 202 0042 1F91      		pop r17
 203 0044 0F91      		pop r16
 204 0046 0895      		ret
 205               		.size	tofile, .-tofile
 206               		.section	.rodata.str1.1
 207               	.LC6:
 208 004e 256C 6400 		.string	"%ld"
 209               		.section	.text.g_write,"ax",@progbits
 210               		.type	g_write, @function
 211               	g_write:
 212 0000 6F92      		push r6
 213 0002 7F92      		push r7
 214 0004 8F92      		push r8
 215 0006 9F92      		push r9
 216 0008 AF92      		push r10
 217 000a BF92      		push r11
GAS LISTING /tmp/ccSoRxjN.s 			page 5


 218 000c CF92      		push r12
 219 000e DF92      		push r13
 220 0010 EF92      		push r14
 221 0012 FF92      		push r15
 222 0014 0F93      		push r16
 223 0016 1F93      		push r17
 224 0018 CF93      		push r28
 225 001a DF93      		push r29
 226 001c 1F92      		push __zero_reg__
 227 001e 1F92      		push __zero_reg__
 228 0020 CDB7      		in r28,__SP_L__
 229 0022 DEB7      		in r29,__SP_H__
 230               	/* prologue: function */
 231               	/* frame size = 2 */
 232               	/* stack size = 16 */
 233               	.L__stack_usage = 16
 234 0024 7C01      		movw r14,r24
 235 0026 962E      		mov r9,r22
 236 0028 872E      		mov r8,r23
 237 002a 6A01      		movw r12,r20
 238 002c 0E94 0000 		call lua_gettop
 239 0030 5C01      		movw r10,r24
 240 0032 01E0      		ldi r16,lo8(1)
 241 0034 10E0      		ldi r17,0
 242 0036 80E0      		ldi r24,lo8(.LC6)
 243 0038 682E      		mov r6,r24
 244 003a 80E0      		ldi r24,hi8(.LC6)
 245 003c 782E      		mov r7,r24
 246               	.L12:
 247 003e 41E0      		ldi r20,1
 248 0040 A416      		cp r10,r20
 249 0042 B104      		cpc r11,__zero_reg__
 250 0044 01F4      		brne .+2
 251 0046 00C0      		rjmp .L26
 252 0048 B601      		movw r22,r12
 253 004a C701      		movw r24,r14
 254 004c 0E94 0000 		call lua_type
 255 0050 0597      		sbiw r24,5
 256 0052 01F4      		brne .L13
 257 0054 0115      		cp r16,__zero_reg__
 258 0056 1105      		cpc r17,__zero_reg__
 259 0058 01F0      		breq .L14
 260 005a B601      		movw r22,r12
 261 005c C701      		movw r24,r14
 262 005e 0E94 0000 		call lua_tonumber
 263 0062 9F93      		push r25
 264 0064 8F93      		push r24
 265 0066 7F93      		push r23
 266 0068 6F93      		push r22
 267 006a 7F92      		push r7
 268 006c 6F92      		push r6
 269 006e 8F92      		push r8
 270 0070 9F92      		push r9
 271 0072 0E94 0000 		call fprintf
 272 0076 31E0      		ldi r19,lo8(1)
 273 0078 20E0      		ldi r18,0
 274 007a 0FB6      		in __tmp_reg__,__SREG__
GAS LISTING /tmp/ccSoRxjN.s 			page 6


 275 007c F894      		cli
 276 007e DEBF      		out __SP_H__,r29
 277 0080 0FBE      		out __SREG__,__tmp_reg__
 278 0082 CDBF      		out __SP_L__,r28
 279 0084 1816      		cp __zero_reg__,r24
 280 0086 1906      		cpc __zero_reg__,r25
 281 0088 04F0      		brlt .L17
 282 008a 00C0      		rjmp .L25
 283               	.L13:
 284 008c AE01      		movw r20,r28
 285 008e 4F5F      		subi r20,-1
 286 0090 5F4F      		sbci r21,-1
 287 0092 B601      		movw r22,r12
 288 0094 C701      		movw r24,r14
 289 0096 0E94 0000 		call luaL_checklstring
 290 009a 0115      		cp r16,__zero_reg__
 291 009c 1105      		cpc r17,__zero_reg__
 292 009e 01F0      		breq .L14
 293 00a0 4981      		ldd r20,Y+1
 294 00a2 5A81      		ldd r21,Y+2
 295 00a4 292D      		mov r18,r9
 296 00a6 382D      		mov r19,r8
 297 00a8 61E0      		ldi r22,lo8(1)
 298 00aa 70E0      		ldi r23,0
 299 00ac 0E94 0000 		call fwrite
 300 00b0 31E0      		ldi r19,lo8(1)
 301 00b2 20E0      		ldi r18,0
 302 00b4 4981      		ldd r20,Y+1
 303 00b6 5A81      		ldd r21,Y+2
 304 00b8 4817      		cp r20,r24
 305 00ba 5907      		cpc r21,r25
 306 00bc 01F0      		breq .L17
 307               	.L25:
 308 00be 30E0      		ldi r19,0
 309               	.L17:
 310 00c0 032F      		mov r16,r19
 311 00c2 122F      		mov r17,r18
 312               	.L14:
 313 00c4 5FEF      		ldi r21,-1
 314 00c6 C51A      		sub r12,r21
 315 00c8 D50A      		sbc r13,r21
 316 00ca 81E0      		ldi r24,1
 317 00cc A81A      		sub r10,r24
 318 00ce B108      		sbc r11,__zero_reg__
 319 00d0 00C0      		rjmp .L12
 320               	.L26:
 321 00d2 40E0      		ldi r20,0
 322 00d4 50E0      		ldi r21,0
 323 00d6 B801      		movw r22,r16
 324 00d8 C701      		movw r24,r14
 325 00da 0E94 0000 		call pushresult
 326               	/* epilogue start */
 327 00de 0F90      		pop __tmp_reg__
 328 00e0 0F90      		pop __tmp_reg__
 329 00e2 DF91      		pop r29
 330 00e4 CF91      		pop r28
 331 00e6 1F91      		pop r17
GAS LISTING /tmp/ccSoRxjN.s 			page 7


 332 00e8 0F91      		pop r16
 333 00ea FF90      		pop r15
 334 00ec EF90      		pop r14
 335 00ee DF90      		pop r13
 336 00f0 CF90      		pop r12
 337 00f2 BF90      		pop r11
 338 00f4 AF90      		pop r10
 339 00f6 9F90      		pop r9
 340 00f8 8F90      		pop r8
 341 00fa 7F90      		pop r7
 342 00fc 6F90      		pop r6
 343 00fe 0895      		ret
 344               		.size	g_write, .-g_write
 345               		.section	.text.f_write,"ax",@progbits
 346               		.type	f_write, @function
 347               	f_write:
 348 0000 CF93      		push r28
 349 0002 DF93      		push r29
 350               	/* prologue: function */
 351               	/* frame size = 0 */
 352               	/* stack size = 2 */
 353               	.L__stack_usage = 2
 354 0004 EC01      		movw r28,r24
 355 0006 0E94 0000 		call tofile
 356 000a 42E0      		ldi r20,lo8(2)
 357 000c 50E0      		ldi r21,0
 358 000e BC01      		movw r22,r24
 359 0010 CE01      		movw r24,r28
 360               	/* epilogue start */
 361 0012 DF91      		pop r29
 362 0014 CF91      		pop r28
 363 0016 0C94 0000 		jmp g_write
 364               		.size	f_write, .-f_write
 365               		.section	.text.read_line,"ax",@progbits
 366               		.type	read_line, @function
 367               	read_line:
 368 0000 CF92      		push r12
 369 0002 DF92      		push r13
 370 0004 EF92      		push r14
 371 0006 FF92      		push r15
 372 0008 0F93      		push r16
 373 000a 1F93      		push r17
 374 000c CF93      		push r28
 375 000e DF93      		push r29
 376 0010 CDB7      		in r28,__SP_L__
 377 0012 DEB7      		in r29,__SP_H__
 378 0014 C650      		subi r28,6
 379 0016 D440      		sbci r29,4
 380 0018 0FB6      		in __tmp_reg__,__SREG__
 381 001a F894      		cli
 382 001c DEBF      		out __SP_H__,r29
 383 001e 0FBE      		out __SREG__,__tmp_reg__
 384 0020 CDBF      		out __SP_L__,r28
 385               	/* prologue: function */
 386               	/* frame size = 1030 */
 387               	/* stack size = 1038 */
 388               	.L__stack_usage = 1038
GAS LISTING /tmp/ccSoRxjN.s 			page 8


 389 0022 8C01      		movw r16,r24
 390 0024 7B01      		movw r14,r22
 391 0026 BE01      		movw r22,r28
 392 0028 6F5F      		subi r22,-1
 393 002a 7F4F      		sbci r23,-1
 394 002c 0E94 0000 		call luaL_buffinit
 395               	.L34:
 396 0030 CE01      		movw r24,r28
 397 0032 0196      		adiw r24,1
 398 0034 0E94 0000 		call luaL_prepbuffer
 399 0038 6C01      		movw r12,r24
 400 003a A701      		movw r20,r14
 401 003c 60E0      		ldi r22,0
 402 003e 74E0      		ldi r23,lo8(4)
 403 0040 0E94 0000 		call fgets
 404 0044 892B      		or r24,r25
 405 0046 01F4      		brne .L29
 406 0048 CE01      		movw r24,r28
 407 004a 0196      		adiw r24,1
 408 004c 0E94 0000 		call luaL_pushresult
 409 0050 6FEF      		ldi r22,lo8(-1)
 410 0052 7FEF      		ldi r23,lo8(-1)
 411 0054 C801      		movw r24,r16
 412 0056 0E94 0000 		call lua_objlen
 413 005a 31E0      		ldi r19,lo8(1)
 414 005c 20E0      		ldi r18,0
 415 005e 892B      		or r24,r25
 416 0060 01F4      		brne .L30
 417 0062 30E0      		ldi r19,0
 418               	.L30:
 419 0064 832F      		mov r24,r19
 420 0066 922F      		mov r25,r18
 421 0068 00C0      		rjmp .L31
 422               	.L29:
 423 006a F601      		movw r30,r12
 424               		0:
 425 006c 0190      		ld __tmp_reg__,Z+
 426 006e 0020      		tst __tmp_reg__
 427 0070 01F4      		brne 0b
 428 0072 3197      		sbiw r30,1
 429 0074 9F01      		movw r18,r30
 430 0076 2C19      		sub r18,r12
 431 0078 3D09      		sbc r19,r13
 432 007a 4981      		ldd r20,Y+1
 433 007c 5A81      		ldd r21,Y+2
 434 007e 2115      		cp r18,__zero_reg__
 435 0080 3105      		cpc r19,__zero_reg__
 436 0082 01F0      		breq .L32
 437 0084 C901      		movw r24,r18
 438 0086 0197      		sbiw r24,1
 439 0088 F601      		movw r30,r12
 440 008a E80F      		add r30,r24
 441 008c F91F      		adc r31,r25
 442 008e 6081      		ld r22,Z
 443 0090 6A30      		cpi r22,lo8(10)
 444 0092 01F0      		breq .L33
 445               	.L32:
GAS LISTING /tmp/ccSoRxjN.s 			page 9


 446 0094 240F      		add r18,r20
 447 0096 351F      		adc r19,r21
 448 0098 3A83      		std Y+2,r19
 449 009a 2983      		std Y+1,r18
 450 009c 00C0      		rjmp .L34
 451               	.L33:
 452 009e 840F      		add r24,r20
 453 00a0 951F      		adc r25,r21
 454 00a2 9A83      		std Y+2,r25
 455 00a4 8983      		std Y+1,r24
 456 00a6 CE01      		movw r24,r28
 457 00a8 0196      		adiw r24,1
 458 00aa 0E94 0000 		call luaL_pushresult
 459 00ae 81E0      		ldi r24,lo8(1)
 460 00b0 90E0      		ldi r25,0
 461               	.L31:
 462               	/* epilogue start */
 463 00b2 CA5F      		subi r28,-6
 464 00b4 DB4F      		sbci r29,-5
 465 00b6 0FB6      		in __tmp_reg__,__SREG__
 466 00b8 F894      		cli
 467 00ba DEBF      		out __SP_H__,r29
 468 00bc 0FBE      		out __SREG__,__tmp_reg__
 469 00be CDBF      		out __SP_L__,r28
 470 00c0 DF91      		pop r29
 471 00c2 CF91      		pop r28
 472 00c4 1F91      		pop r17
 473 00c6 0F91      		pop r16
 474 00c8 FF90      		pop r15
 475 00ca EF90      		pop r14
 476 00cc DF90      		pop r13
 477 00ce CF90      		pop r12
 478 00d0 0895      		ret
 479               		.size	read_line, .-read_line
 480               		.section	.text.newfile,"ax",@progbits
 481               		.type	newfile, @function
 482               	newfile:
 483 0000 0F93      		push r16
 484 0002 1F93      		push r17
 485 0004 CF93      		push r28
 486 0006 DF93      		push r29
 487               	/* prologue: function */
 488               	/* frame size = 0 */
 489               	/* stack size = 4 */
 490               	.L__stack_usage = 4
 491 0008 EC01      		movw r28,r24
 492 000a 62E0      		ldi r22,lo8(2)
 493 000c 70E0      		ldi r23,0
 494 000e 0E94 0000 		call lua_newuserdata
 495 0012 8C01      		movw r16,r24
 496 0014 FC01      		movw r30,r24
 497 0016 1182      		std Z+1,__zero_reg__
 498 0018 1082      		st Z,__zero_reg__
 499 001a 40E0      		ldi r20,lo8(.LC3)
 500 001c 50E0      		ldi r21,hi8(.LC3)
 501 001e 60EF      		ldi r22,lo8(-16)
 502 0020 78ED      		ldi r23,lo8(-40)
GAS LISTING /tmp/ccSoRxjN.s 			page 10


 503 0022 CE01      		movw r24,r28
 504 0024 0E94 0000 		call lua_getfield
 505 0028 6EEF      		ldi r22,lo8(-2)
 506 002a 7FEF      		ldi r23,lo8(-1)
 507 002c CE01      		movw r24,r28
 508 002e 0E94 0000 		call lua_setmetatable
 509 0032 C801      		movw r24,r16
 510               	/* epilogue start */
 511 0034 DF91      		pop r29
 512 0036 CF91      		pop r28
 513 0038 1F91      		pop r17
 514 003a 0F91      		pop r16
 515 003c 0895      		ret
 516               		.size	newfile, .-newfile
 517               		.section	.rodata.str1.1
 518               	.LC7:
 519 0052 7200      		.string	"r"
 520               	.LC8:
 521 0054 2770 6F70 		.string	"'popen' not supported"
 521      656E 2720 
 521      6E6F 7420 
 521      7375 7070 
 521      6F72 7465 
 522               		.section	.text.io_popen,"ax",@progbits
 523               		.type	io_popen, @function
 524               	io_popen:
 525 0000 EF92      		push r14
 526 0002 FF92      		push r15
 527 0004 0F93      		push r16
 528 0006 1F93      		push r17
 529 0008 CF93      		push r28
 530 000a DF93      		push r29
 531               	/* prologue: function */
 532               	/* frame size = 0 */
 533               	/* stack size = 6 */
 534               	.L__stack_usage = 6
 535 000c D82F      		mov r29,r24
 536 000e C92F      		mov r28,r25
 537 0010 40E0      		ldi r20,0
 538 0012 50E0      		ldi r21,0
 539 0014 61E0      		ldi r22,lo8(1)
 540 0016 70E0      		ldi r23,0
 541 0018 0E94 0000 		call luaL_checklstring
 542 001c 8C01      		movw r16,r24
 543 001e 20E0      		ldi r18,0
 544 0020 30E0      		ldi r19,0
 545 0022 40E0      		ldi r20,lo8(.LC7)
 546 0024 50E0      		ldi r21,hi8(.LC7)
 547 0026 62E0      		ldi r22,lo8(2)
 548 0028 70E0      		ldi r23,0
 549 002a 8D2F      		mov r24,r29
 550 002c 9C2F      		mov r25,r28
 551 002e 0E94 0000 		call luaL_optlstring
 552 0032 8D2F      		mov r24,r29
 553 0034 9C2F      		mov r25,r28
 554 0036 0E94 0000 		call newfile
 555 003a 7C01      		movw r14,r24
GAS LISTING /tmp/ccSoRxjN.s 			page 11


 556 003c 80E0      		ldi r24,lo8(.LC8)
 557 003e 90E0      		ldi r25,hi8(.LC8)
 558 0040 9F93      		push r25
 559 0042 8F93      		push r24
 560 0044 CF93      		push r28
 561 0046 DF93      		push r29
 562 0048 0E94 0000 		call luaL_error
 563 004c F701      		movw r30,r14
 564 004e 1182      		std Z+1,__zero_reg__
 565 0050 1082      		st Z,__zero_reg__
 566 0052 0F90      		pop __tmp_reg__
 567 0054 0F90      		pop __tmp_reg__
 568 0056 0F90      		pop __tmp_reg__
 569 0058 0F90      		pop __tmp_reg__
 570 005a A801      		movw r20,r16
 571 005c 60E0      		ldi r22,0
 572 005e 70E0      		ldi r23,0
 573 0060 8D2F      		mov r24,r29
 574 0062 9C2F      		mov r25,r28
 575               	/* epilogue start */
 576 0064 DF91      		pop r29
 577 0066 CF91      		pop r28
 578 0068 1F91      		pop r17
 579 006a 0F91      		pop r16
 580 006c FF90      		pop r15
 581 006e EF90      		pop r14
 582 0070 0C94 0000 		jmp pushresult
 583               		.size	io_popen, .-io_popen
 584               		.section	.text.io_open,"ax",@progbits
 585               		.type	io_open, @function
 586               	io_open:
 587 0000 CF92      		push r12
 588 0002 DF92      		push r13
 589 0004 EF92      		push r14
 590 0006 FF92      		push r15
 591 0008 0F93      		push r16
 592 000a 1F93      		push r17
 593 000c CF93      		push r28
 594 000e DF93      		push r29
 595               	/* prologue: function */
 596               	/* frame size = 0 */
 597               	/* stack size = 8 */
 598               	.L__stack_usage = 8
 599 0010 EC01      		movw r28,r24
 600 0012 40E0      		ldi r20,0
 601 0014 50E0      		ldi r21,0
 602 0016 61E0      		ldi r22,lo8(1)
 603 0018 70E0      		ldi r23,0
 604 001a 0E94 0000 		call luaL_checklstring
 605 001e 8C01      		movw r16,r24
 606 0020 20E0      		ldi r18,0
 607 0022 30E0      		ldi r19,0
 608 0024 40E0      		ldi r20,lo8(.LC7)
 609 0026 50E0      		ldi r21,hi8(.LC7)
 610 0028 62E0      		ldi r22,lo8(2)
 611 002a 70E0      		ldi r23,0
 612 002c CE01      		movw r24,r28
GAS LISTING /tmp/ccSoRxjN.s 			page 12


 613 002e 0E94 0000 		call luaL_optlstring
 614 0032 6C01      		movw r12,r24
 615 0034 CE01      		movw r24,r28
 616 0036 0E94 0000 		call newfile
 617 003a 7C01      		movw r14,r24
 618 003c B601      		movw r22,r12
 619 003e C801      		movw r24,r16
 620 0040 0E94 0000 		call fopen
 621 0044 F701      		movw r30,r14
 622 0046 9183      		std Z+1,r25
 623 0048 8083      		st Z,r24
 624 004a 892B      		or r24,r25
 625 004c 01F4      		brne .L41
 626 004e A801      		movw r20,r16
 627 0050 60E0      		ldi r22,0
 628 0052 70E0      		ldi r23,0
 629 0054 CE01      		movw r24,r28
 630               	/* epilogue start */
 631 0056 DF91      		pop r29
 632 0058 CF91      		pop r28
 633 005a 1F91      		pop r17
 634 005c 0F91      		pop r16
 635 005e FF90      		pop r15
 636 0060 EF90      		pop r14
 637 0062 DF90      		pop r13
 638 0064 CF90      		pop r12
 639 0066 0C94 0000 		jmp pushresult
 640               	.L41:
 641 006a 81E0      		ldi r24,lo8(1)
 642 006c 90E0      		ldi r25,0
 643               	/* epilogue start */
 644 006e DF91      		pop r29
 645 0070 CF91      		pop r28
 646 0072 1F91      		pop r17
 647 0074 0F91      		pop r16
 648 0076 FF90      		pop r15
 649 0078 EF90      		pop r14
 650 007a DF90      		pop r13
 651 007c CF90      		pop r12
 652 007e 0895      		ret
 653               		.size	io_open, .-io_open
 654               		.section	.rodata.str1.1
 655               	.LC9:
 656 006a 5F5F 636C 		.string	"__close"
 656      6F73 6500 
 657               		.section	.text.aux_close,"ax",@progbits
 658               		.type	aux_close, @function
 659               	aux_close:
 660 0000 CF93      		push r28
 661 0002 DF93      		push r29
 662               	/* prologue: function */
 663               	/* frame size = 0 */
 664               	/* stack size = 2 */
 665               	.L__stack_usage = 2
 666 0004 EC01      		movw r28,r24
 667 0006 61E0      		ldi r22,lo8(1)
 668 0008 70E0      		ldi r23,0
GAS LISTING /tmp/ccSoRxjN.s 			page 13


 669 000a 0E94 0000 		call lua_getfenv
 670 000e 40E0      		ldi r20,lo8(.LC9)
 671 0010 50E0      		ldi r21,hi8(.LC9)
 672 0012 6FEF      		ldi r22,lo8(-1)
 673 0014 7FEF      		ldi r23,lo8(-1)
 674 0016 CE01      		movw r24,r28
 675 0018 0E94 0000 		call lua_getfield
 676 001c 6FEF      		ldi r22,lo8(-1)
 677 001e 7FEF      		ldi r23,lo8(-1)
 678 0020 CE01      		movw r24,r28
 679 0022 0E94 0000 		call lua_tocfunction
 680 0026 FC01      		movw r30,r24
 681 0028 CE01      		movw r24,r28
 682               	/* epilogue start */
 683 002a DF91      		pop r29
 684 002c CF91      		pop r28
 685 002e 1994      		eijmp
 686               		.size	aux_close, .-aux_close
 687               		.section	.text.io_close,"ax",@progbits
 688               		.type	io_close, @function
 689               	io_close:
 690 0000 CF93      		push r28
 691 0002 DF93      		push r29
 692               	/* prologue: function */
 693               	/* frame size = 0 */
 694               	/* stack size = 2 */
 695               	.L__stack_usage = 2
 696 0004 EC01      		movw r28,r24
 697 0006 61E0      		ldi r22,lo8(1)
 698 0008 70E0      		ldi r23,0
 699 000a 0E94 0000 		call lua_type
 700 000e 0196      		adiw r24,1
 701 0010 01F4      		brne .L44
 702 0012 42E0      		ldi r20,lo8(2)
 703 0014 50E0      		ldi r21,0
 704 0016 6FEE      		ldi r22,lo8(-17)
 705 0018 78ED      		ldi r23,lo8(-40)
 706 001a CE01      		movw r24,r28
 707 001c 0E94 0000 		call lua_rawgeti
 708               	.L44:
 709 0020 CE01      		movw r24,r28
 710 0022 0E94 0000 		call tofile
 711 0026 CE01      		movw r24,r28
 712               	/* epilogue start */
 713 0028 DF91      		pop r29
 714 002a CF91      		pop r28
 715 002c 0C94 0000 		jmp aux_close
 716               		.size	io_close, .-io_close
 717               		.section	.text.io_gc,"ax",@progbits
 718               		.type	io_gc, @function
 719               	io_gc:
 720 0000 CF93      		push r28
 721 0002 DF93      		push r29
 722               	/* prologue: function */
 723               	/* frame size = 0 */
 724               	/* stack size = 2 */
 725               	.L__stack_usage = 2
GAS LISTING /tmp/ccSoRxjN.s 			page 14


 726 0004 EC01      		movw r28,r24
 727 0006 40E0      		ldi r20,lo8(.LC3)
 728 0008 50E0      		ldi r21,hi8(.LC3)
 729 000a 61E0      		ldi r22,lo8(1)
 730 000c 70E0      		ldi r23,0
 731 000e 0E94 0000 		call luaL_checkudata
 732 0012 FC01      		movw r30,r24
 733 0014 8081      		ld r24,Z
 734 0016 9181      		ldd r25,Z+1
 735 0018 892B      		or r24,r25
 736 001a 01F0      		breq .L46
 737 001c CE01      		movw r24,r28
 738 001e 0E94 0000 		call aux_close
 739               	.L46:
 740 0022 80E0      		ldi r24,0
 741 0024 90E0      		ldi r25,0
 742               	/* epilogue start */
 743 0026 DF91      		pop r29
 744 0028 CF91      		pop r28
 745 002a 0895      		ret
 746               		.size	io_gc, .-io_gc
 747               		.section	.text.f_flush,"ax",@progbits
 748               		.type	f_flush, @function
 749               	f_flush:
 750 0000 CF93      		push r28
 751 0002 DF93      		push r29
 752               	/* prologue: function */
 753               	/* frame size = 0 */
 754               	/* stack size = 2 */
 755               	.L__stack_usage = 2
 756 0004 EC01      		movw r28,r24
 757 0006 0E94 0000 		call tofile
 758 000a 0E94 0000 		call fflush
 759 000e 61E0      		ldi r22,lo8(1)
 760 0010 70E0      		ldi r23,0
 761 0012 892B      		or r24,r25
 762 0014 01F0      		breq .L51
 763 0016 60E0      		ldi r22,0
 764 0018 70E0      		ldi r23,0
 765               	.L51:
 766 001a 40E0      		ldi r20,0
 767 001c 50E0      		ldi r21,0
 768 001e CE01      		movw r24,r28
 769               	/* epilogue start */
 770 0020 DF91      		pop r29
 771 0022 CF91      		pop r28
 772 0024 0C94 0000 		jmp pushresult
 773               		.size	f_flush, .-f_flush
 774               		.section	.text.io_fclose,"ax",@progbits
 775               		.type	io_fclose, @function
 776               	io_fclose:
 777 0000 0F93      		push r16
 778 0002 1F93      		push r17
 779 0004 CF93      		push r28
 780 0006 DF93      		push r29
 781               	/* prologue: function */
 782               	/* frame size = 0 */
GAS LISTING /tmp/ccSoRxjN.s 			page 15


 783               	/* stack size = 4 */
 784               	.L__stack_usage = 4
 785 0008 EC01      		movw r28,r24
 786 000a 40E0      		ldi r20,lo8(.LC3)
 787 000c 50E0      		ldi r21,hi8(.LC3)
 788 000e 61E0      		ldi r22,lo8(1)
 789 0010 70E0      		ldi r23,0
 790 0012 0E94 0000 		call luaL_checkudata
 791 0016 8C01      		movw r16,r24
 792 0018 FC01      		movw r30,r24
 793 001a 8081      		ld r24,Z
 794 001c 9181      		ldd r25,Z+1
 795 001e 0E94 0000 		call fclose
 796 0022 F801      		movw r30,r16
 797 0024 1182      		std Z+1,__zero_reg__
 798 0026 1082      		st Z,__zero_reg__
 799 0028 61E0      		ldi r22,lo8(1)
 800 002a 70E0      		ldi r23,0
 801 002c 892B      		or r24,r25
 802 002e 01F0      		breq .L56
 803 0030 60E0      		ldi r22,0
 804 0032 70E0      		ldi r23,0
 805               	.L56:
 806 0034 40E0      		ldi r20,0
 807 0036 50E0      		ldi r21,0
 808 0038 CE01      		movw r24,r28
 809               	/* epilogue start */
 810 003a DF91      		pop r29
 811 003c CF91      		pop r28
 812 003e 1F91      		pop r17
 813 0040 0F91      		pop r16
 814 0042 0C94 0000 		jmp pushresult
 815               		.size	io_fclose, .-io_fclose
 816               		.section	.text.createstdfile,"ax",@progbits
 817               		.type	createstdfile, @function
 818               	createstdfile:
 819 0000 CF92      		push r12
 820 0002 DF92      		push r13
 821 0004 EF92      		push r14
 822 0006 FF92      		push r15
 823 0008 0F93      		push r16
 824 000a 1F93      		push r17
 825 000c CF93      		push r28
 826 000e DF93      		push r29
 827               	/* prologue: function */
 828               	/* frame size = 0 */
 829               	/* stack size = 8 */
 830               	.L__stack_usage = 8
 831 0010 EC01      		movw r28,r24
 832 0012 6B01      		movw r12,r22
 833 0014 8A01      		movw r16,r20
 834 0016 7901      		movw r14,r18
 835 0018 0E94 0000 		call newfile
 836 001c FC01      		movw r30,r24
 837 001e D182      		std Z+1,r13
 838 0020 C082      		st Z,r12
 839 0022 1016      		cp __zero_reg__,r16
GAS LISTING /tmp/ccSoRxjN.s 			page 16


 840 0024 1106      		cpc __zero_reg__,r17
 841 0026 04F4      		brge .L61
 842 0028 6FEF      		ldi r22,lo8(-1)
 843 002a 7FEF      		ldi r23,lo8(-1)
 844 002c CE01      		movw r24,r28
 845 002e 0E94 0000 		call lua_pushvalue
 846 0032 A801      		movw r20,r16
 847 0034 6FEE      		ldi r22,lo8(-17)
 848 0036 78ED      		ldi r23,lo8(-40)
 849 0038 CE01      		movw r24,r28
 850 003a 0E94 0000 		call lua_rawseti
 851               	.L61:
 852 003e 6EEF      		ldi r22,lo8(-2)
 853 0040 7FEF      		ldi r23,lo8(-1)
 854 0042 CE01      		movw r24,r28
 855 0044 0E94 0000 		call lua_pushvalue
 856 0048 6EEF      		ldi r22,lo8(-2)
 857 004a 7FEF      		ldi r23,lo8(-1)
 858 004c CE01      		movw r24,r28
 859 004e 0E94 0000 		call lua_setfenv
 860 0052 A701      		movw r20,r14
 861 0054 6DEF      		ldi r22,lo8(-3)
 862 0056 7FEF      		ldi r23,lo8(-1)
 863 0058 CE01      		movw r24,r28
 864               	/* epilogue start */
 865 005a DF91      		pop r29
 866 005c CF91      		pop r28
 867 005e 1F91      		pop r17
 868 0060 0F91      		pop r16
 869 0062 FF90      		pop r15
 870 0064 EF90      		pop r14
 871 0066 DF90      		pop r13
 872 0068 CF90      		pop r12
 873 006a 0C94 0000 		jmp lua_setfield
 874               		.size	createstdfile, .-createstdfile
 875               		.section	.text.newfenv,"ax",@progbits
 876               		.type	newfenv, @function
 877               	newfenv:
 878 0000 0F93      		push r16
 879 0002 1F93      		push r17
 880 0004 CF93      		push r28
 881 0006 DF93      		push r29
 882               	/* prologue: function */
 883               	/* frame size = 0 */
 884               	/* stack size = 4 */
 885               	.L__stack_usage = 4
 886 0008 EC01      		movw r28,r24
 887 000a 8B01      		movw r16,r22
 888 000c 41E0      		ldi r20,lo8(1)
 889 000e 50E0      		ldi r21,0
 890 0010 60E0      		ldi r22,0
 891 0012 70E0      		ldi r23,0
 892 0014 0E94 0000 		call lua_createtable
 893 0018 40E0      		ldi r20,0
 894 001a 50E0      		ldi r21,0
 895 001c B801      		movw r22,r16
 896 001e CE01      		movw r24,r28
GAS LISTING /tmp/ccSoRxjN.s 			page 17


 897 0020 0E94 0000 		call lua_pushcclosure
 898 0024 40E0      		ldi r20,lo8(.LC9)
 899 0026 50E0      		ldi r21,hi8(.LC9)
 900 0028 6EEF      		ldi r22,lo8(-2)
 901 002a 7FEF      		ldi r23,lo8(-1)
 902 002c CE01      		movw r24,r28
 903               	/* epilogue start */
 904 002e DF91      		pop r29
 905 0030 CF91      		pop r28
 906 0032 1F91      		pop r17
 907 0034 0F91      		pop r16
 908 0036 0C94 0000 		jmp lua_setfield
 909               		.size	newfenv, .-newfenv
 910               		.section	.rodata.str1.1
 911               	.LC10:
 912 0072 6669 6C65 		.string	"file (closed)"
 912      2028 636C 
 912      6F73 6564 
 912      2900 
 913               	.LC11:
 914 0080 6669 6C65 		.string	"file (%p)"
 914      2028 2570 
 914      2900 
 915               		.section	.text.io_tostring,"ax",@progbits
 916               		.type	io_tostring, @function
 917               	io_tostring:
 918 0000 CF93      		push r28
 919 0002 DF93      		push r29
 920               	/* prologue: function */
 921               	/* frame size = 0 */
 922               	/* stack size = 2 */
 923               	.L__stack_usage = 2
 924 0004 EC01      		movw r28,r24
 925 0006 40E0      		ldi r20,lo8(.LC3)
 926 0008 50E0      		ldi r21,hi8(.LC3)
 927 000a 61E0      		ldi r22,lo8(1)
 928 000c 70E0      		ldi r23,0
 929 000e 0E94 0000 		call luaL_checkudata
 930 0012 FC01      		movw r30,r24
 931 0014 8081      		ld r24,Z
 932 0016 9181      		ldd r25,Z+1
 933 0018 0097      		sbiw r24,0
 934 001a 01F4      		brne .L64
 935 001c 4DE0      		ldi r20,lo8(13)
 936 001e 50E0      		ldi r21,0
 937 0020 60E0      		ldi r22,lo8(.LC10)
 938 0022 70E0      		ldi r23,hi8(.LC10)
 939 0024 CE01      		movw r24,r28
 940 0026 0E94 0000 		call lua_pushlstring
 941 002a 00C0      		rjmp .L65
 942               	.L64:
 943 002c 9F93      		push r25
 944 002e 8F93      		push r24
 945 0030 80E0      		ldi r24,lo8(.LC11)
 946 0032 90E0      		ldi r25,hi8(.LC11)
 947 0034 9F93      		push r25
 948 0036 8F93      		push r24
GAS LISTING /tmp/ccSoRxjN.s 			page 18


 949 0038 DF93      		push r29
 950 003a CF93      		push r28
 951 003c 0E94 0000 		call lua_pushfstring
 952 0040 0F90      		pop __tmp_reg__
 953 0042 0F90      		pop __tmp_reg__
 954 0044 0F90      		pop __tmp_reg__
 955 0046 0F90      		pop __tmp_reg__
 956 0048 0F90      		pop __tmp_reg__
 957 004a 0F90      		pop __tmp_reg__
 958               	.L65:
 959 004c 81E0      		ldi r24,lo8(1)
 960 004e 90E0      		ldi r25,0
 961               	/* epilogue start */
 962 0050 DF91      		pop r29
 963 0052 CF91      		pop r28
 964 0054 0895      		ret
 965               		.size	io_tostring, .-io_tostring
 966               		.section	.rodata.str1.1
 967               	.LC12:
 968 008a 7374 616E 		.string	"standard %s file is closed"
 968      6461 7264 
 968      2025 7320 
 968      6669 6C65 
 968      2069 7320 
 969               		.section	.text.getiofile,"ax",@progbits
 970               		.type	getiofile, @function
 971               	getiofile:
 972 0000 EF92      		push r14
 973 0002 FF92      		push r15
 974 0004 0F93      		push r16
 975 0006 1F93      		push r17
 976 0008 CF93      		push r28
 977 000a DF93      		push r29
 978               	/* prologue: function */
 979               	/* frame size = 0 */
 980               	/* stack size = 6 */
 981               	.L__stack_usage = 6
 982 000c 182F      		mov r17,r24
 983 000e 092F      		mov r16,r25
 984 0010 EB01      		movw r28,r22
 985 0012 AB01      		movw r20,r22
 986 0014 6FEE      		ldi r22,lo8(-17)
 987 0016 78ED      		ldi r23,lo8(-40)
 988 0018 0E94 0000 		call lua_rawgeti
 989 001c 6FEF      		ldi r22,lo8(-1)
 990 001e 7FEF      		ldi r23,lo8(-1)
 991 0020 812F      		mov r24,r17
 992 0022 902F      		mov r25,r16
 993 0024 0E94 0000 		call lua_touserdata
 994 0028 FC01      		movw r30,r24
 995 002a E080      		ld r14,Z
 996 002c F180      		ldd r15,Z+1
 997 002e E114      		cp r14,__zero_reg__
 998 0030 F104      		cpc r15,__zero_reg__
 999 0032 01F4      		brne .L67
 1000 0034 CC0F      		lsl r28
 1001 0036 DD1F      		rol r29
GAS LISTING /tmp/ccSoRxjN.s 			page 19


 1002 0038 C050      		subi r28,lo8(-(fnames-2))
 1003 003a D040      		sbci r29,hi8(-(fnames-2))
 1004 003c 8981      		ldd r24,Y+1
 1005 003e 8F93      		push r24
 1006 0040 8881      		ld r24,Y
 1007 0042 8F93      		push r24
 1008 0044 80E0      		ldi r24,lo8(.LC12)
 1009 0046 90E0      		ldi r25,hi8(.LC12)
 1010 0048 9F93      		push r25
 1011 004a 8F93      		push r24
 1012 004c 0F93      		push r16
 1013 004e 1F93      		push r17
 1014 0050 0E94 0000 		call luaL_error
 1015 0054 0F90      		pop __tmp_reg__
 1016 0056 0F90      		pop __tmp_reg__
 1017 0058 0F90      		pop __tmp_reg__
 1018 005a 0F90      		pop __tmp_reg__
 1019 005c 0F90      		pop __tmp_reg__
 1020 005e 0F90      		pop __tmp_reg__
 1021               	.L67:
 1022 0060 C701      		movw r24,r14
 1023               	/* epilogue start */
 1024 0062 DF91      		pop r29
 1025 0064 CF91      		pop r28
 1026 0066 1F91      		pop r17
 1027 0068 0F91      		pop r16
 1028 006a FF90      		pop r15
 1029 006c EF90      		pop r14
 1030 006e 0895      		ret
 1031               		.size	getiofile, .-getiofile
 1032               		.section	.text.io_write,"ax",@progbits
 1033               		.type	io_write, @function
 1034               	io_write:
 1035 0000 CF93      		push r28
 1036 0002 DF93      		push r29
 1037               	/* prologue: function */
 1038               	/* frame size = 0 */
 1039               	/* stack size = 2 */
 1040               	.L__stack_usage = 2
 1041 0004 EC01      		movw r28,r24
 1042 0006 62E0      		ldi r22,lo8(2)
 1043 0008 70E0      		ldi r23,0
 1044 000a 0E94 0000 		call getiofile
 1045 000e 41E0      		ldi r20,lo8(1)
 1046 0010 50E0      		ldi r21,0
 1047 0012 BC01      		movw r22,r24
 1048 0014 CE01      		movw r24,r28
 1049               	/* epilogue start */
 1050 0016 DF91      		pop r29
 1051 0018 CF91      		pop r28
 1052 001a 0C94 0000 		jmp g_write
 1053               		.size	io_write, .-io_write
 1054               		.section	.text.io_flush,"ax",@progbits
 1055               		.type	io_flush, @function
 1056               	io_flush:
 1057 0000 CF93      		push r28
 1058 0002 DF93      		push r29
GAS LISTING /tmp/ccSoRxjN.s 			page 20


 1059               	/* prologue: function */
 1060               	/* frame size = 0 */
 1061               	/* stack size = 2 */
 1062               	.L__stack_usage = 2
 1063 0004 EC01      		movw r28,r24
 1064 0006 62E0      		ldi r22,lo8(2)
 1065 0008 70E0      		ldi r23,0
 1066 000a 0E94 0000 		call getiofile
 1067 000e 0E94 0000 		call fflush
 1068 0012 61E0      		ldi r22,lo8(1)
 1069 0014 70E0      		ldi r23,0
 1070 0016 892B      		or r24,r25
 1071 0018 01F0      		breq .L70
 1072 001a 60E0      		ldi r22,0
 1073 001c 70E0      		ldi r23,0
 1074               	.L70:
 1075 001e 40E0      		ldi r20,0
 1076 0020 50E0      		ldi r21,0
 1077 0022 CE01      		movw r24,r28
 1078               	/* epilogue start */
 1079 0024 DF91      		pop r29
 1080 0026 CF91      		pop r28
 1081 0028 0C94 0000 		jmp pushresult
 1082               		.size	io_flush, .-io_flush
 1083               		.section	.rodata.str1.1
 1084               	.LC13:
 1085 00a5 636C 6F73 		.string	"closed file"
 1085      6564 2066 
 1085      696C 6500 
 1086               	.LC14:
 1087 00b1 6669 6C65 		.string	"file"
 1087      00
 1088               		.section	.text.io_type,"ax",@progbits
 1089               		.type	io_type, @function
 1090               	io_type:
 1091 0000 0F93      		push r16
 1092 0002 1F93      		push r17
 1093 0004 CF93      		push r28
 1094 0006 DF93      		push r29
 1095               	/* prologue: function */
 1096               	/* frame size = 0 */
 1097               	/* stack size = 4 */
 1098               	.L__stack_usage = 4
 1099 0008 EC01      		movw r28,r24
 1100 000a 61E0      		ldi r22,lo8(1)
 1101 000c 70E0      		ldi r23,0
 1102 000e 0E94 0000 		call luaL_checkany
 1103 0012 61E0      		ldi r22,lo8(1)
 1104 0014 70E0      		ldi r23,0
 1105 0016 CE01      		movw r24,r28
 1106 0018 0E94 0000 		call lua_touserdata
 1107 001c 8C01      		movw r16,r24
 1108 001e 40E0      		ldi r20,lo8(.LC3)
 1109 0020 50E0      		ldi r21,hi8(.LC3)
 1110 0022 60EF      		ldi r22,lo8(-16)
 1111 0024 78ED      		ldi r23,lo8(-40)
 1112 0026 CE01      		movw r24,r28
GAS LISTING /tmp/ccSoRxjN.s 			page 21


 1113 0028 0E94 0000 		call lua_getfield
 1114 002c 0115      		cp r16,__zero_reg__
 1115 002e 1105      		cpc r17,__zero_reg__
 1116 0030 01F4      		brne .L75
 1117               	.L77:
 1118 0032 CE01      		movw r24,r28
 1119 0034 0E94 0000 		call lua_pushnil
 1120 0038 00C0      		rjmp .L76
 1121               	.L75:
 1122 003a 61E0      		ldi r22,lo8(1)
 1123 003c 70E0      		ldi r23,0
 1124 003e CE01      		movw r24,r28
 1125 0040 0E94 0000 		call lua_getmetatable
 1126 0044 892B      		or r24,r25
 1127 0046 01F0      		breq .L77
 1128 0048 4FEF      		ldi r20,lo8(-1)
 1129 004a 5FEF      		ldi r21,lo8(-1)
 1130 004c 6EEF      		ldi r22,lo8(-2)
 1131 004e 7FEF      		ldi r23,lo8(-1)
 1132 0050 CE01      		movw r24,r28
 1133 0052 0E94 0000 		call lua_rawequal
 1134 0056 892B      		or r24,r25
 1135 0058 01F0      		breq .L77
 1136 005a F801      		movw r30,r16
 1137 005c 8081      		ld r24,Z
 1138 005e 9181      		ldd r25,Z+1
 1139 0060 892B      		or r24,r25
 1140 0062 01F4      		brne .L78
 1141 0064 4BE0      		ldi r20,lo8(11)
 1142 0066 50E0      		ldi r21,0
 1143 0068 60E0      		ldi r22,lo8(.LC13)
 1144 006a 70E0      		ldi r23,hi8(.LC13)
 1145 006c 00C0      		rjmp .L85
 1146               	.L78:
 1147 006e 44E0      		ldi r20,lo8(4)
 1148 0070 50E0      		ldi r21,0
 1149 0072 60E0      		ldi r22,lo8(.LC14)
 1150 0074 70E0      		ldi r23,hi8(.LC14)
 1151               	.L85:
 1152 0076 CE01      		movw r24,r28
 1153 0078 0E94 0000 		call lua_pushlstring
 1154               	.L76:
 1155 007c 81E0      		ldi r24,lo8(1)
 1156 007e 90E0      		ldi r25,0
 1157               	/* epilogue start */
 1158 0080 DF91      		pop r29
 1159 0082 CF91      		pop r28
 1160 0084 1F91      		pop r17
 1161 0086 0F91      		pop r16
 1162 0088 0895      		ret
 1163               		.size	io_type, .-io_type
 1164               		.section	.text.read_chars,"ax",@progbits
 1165               		.type	read_chars, @function
 1166               	read_chars:
 1167 0000 8F92      		push r8
 1168 0002 9F92      		push r9
 1169 0004 AF92      		push r10
GAS LISTING /tmp/ccSoRxjN.s 			page 22


 1170 0006 BF92      		push r11
 1171 0008 CF92      		push r12
 1172 000a DF92      		push r13
 1173 000c EF92      		push r14
 1174 000e FF92      		push r15
 1175 0010 0F93      		push r16
 1176 0012 1F93      		push r17
 1177 0014 CF93      		push r28
 1178 0016 DF93      		push r29
 1179 0018 CDB7      		in r28,__SP_L__
 1180 001a DEB7      		in r29,__SP_H__
 1181 001c C650      		subi r28,6
 1182 001e D440      		sbci r29,4
 1183 0020 0FB6      		in __tmp_reg__,__SREG__
 1184 0022 F894      		cli
 1185 0024 DEBF      		out __SP_H__,r29
 1186 0026 0FBE      		out __SREG__,__tmp_reg__
 1187 0028 CDBF      		out __SP_L__,r28
 1188               	/* prologue: function */
 1189               	/* frame size = 1030 */
 1190               	/* stack size = 1042 */
 1191               	.L__stack_usage = 1042
 1192 002a 5C01      		movw r10,r24
 1193 002c 4B01      		movw r8,r22
 1194 002e 8A01      		movw r16,r20
 1195 0030 BE01      		movw r22,r28
 1196 0032 6F5F      		subi r22,-1
 1197 0034 7F4F      		sbci r23,-1
 1198 0036 0E94 0000 		call luaL_buffinit
 1199 003a E12C      		mov r14,__zero_reg__
 1200 003c 84E0      		ldi r24,lo8(4)
 1201 003e F82E      		mov r15,r24
 1202               	.L89:
 1203 0040 CE01      		movw r24,r28
 1204 0042 0196      		adiw r24,1
 1205 0044 0E94 0000 		call luaL_prepbuffer
 1206 0048 6801      		movw r12,r16
 1207 004a E016      		cp r14,r16
 1208 004c F106      		cpc r15,r17
 1209 004e 00F4      		brsh .L87
 1210 0050 6701      		movw r12,r14
 1211               	.L87:
 1212 0052 9401      		movw r18,r8
 1213 0054 A601      		movw r20,r12
 1214 0056 61E0      		ldi r22,lo8(1)
 1215 0058 70E0      		ldi r23,0
 1216 005a 0E94 0000 		call fread
 1217 005e 7C01      		movw r14,r24
 1218 0060 8981      		ldd r24,Y+1
 1219 0062 9A81      		ldd r25,Y+2
 1220 0064 8E0D      		add r24,r14
 1221 0066 9F1D      		adc r25,r15
 1222 0068 9A83      		std Y+2,r25
 1223 006a 8983      		std Y+1,r24
 1224 006c 0E19      		sub r16,r14
 1225 006e 1F09      		sbc r17,r15
 1226 0070 01F0      		breq .L88
GAS LISTING /tmp/ccSoRxjN.s 			page 23


 1227 0072 EC14      		cp r14,r12
 1228 0074 FD04      		cpc r15,r13
 1229 0076 01F0      		breq .L89
 1230               	.L88:
 1231 0078 CE01      		movw r24,r28
 1232 007a 0196      		adiw r24,1
 1233 007c 0E94 0000 		call luaL_pushresult
 1234 0080 012B      		or r16,r17
 1235 0082 01F0      		breq .L92
 1236 0084 6FEF      		ldi r22,lo8(-1)
 1237 0086 7FEF      		ldi r23,lo8(-1)
 1238 0088 C501      		movw r24,r10
 1239 008a 0E94 0000 		call lua_objlen
 1240 008e 31E0      		ldi r19,lo8(1)
 1241 0090 20E0      		ldi r18,0
 1242 0092 892B      		or r24,r25
 1243 0094 01F4      		brne .L91
 1244 0096 30E0      		ldi r19,0
 1245               	.L91:
 1246 0098 832F      		mov r24,r19
 1247 009a 922F      		mov r25,r18
 1248 009c 00C0      		rjmp .L90
 1249               	.L92:
 1250 009e 81E0      		ldi r24,lo8(1)
 1251 00a0 90E0      		ldi r25,0
 1252               	.L90:
 1253               	/* epilogue start */
 1254 00a2 CA5F      		subi r28,-6
 1255 00a4 DB4F      		sbci r29,-5
 1256 00a6 0FB6      		in __tmp_reg__,__SREG__
 1257 00a8 F894      		cli
 1258 00aa DEBF      		out __SP_H__,r29
 1259 00ac 0FBE      		out __SREG__,__tmp_reg__
 1260 00ae CDBF      		out __SP_L__,r28
 1261 00b0 DF91      		pop r29
 1262 00b2 CF91      		pop r28
 1263 00b4 1F91      		pop r17
 1264 00b6 0F91      		pop r16
 1265 00b8 FF90      		pop r15
 1266 00ba EF90      		pop r14
 1267 00bc DF90      		pop r13
 1268 00be CF90      		pop r12
 1269 00c0 BF90      		pop r11
 1270 00c2 AF90      		pop r10
 1271 00c4 9F90      		pop r9
 1272 00c6 8F90      		pop r8
 1273 00c8 0895      		ret
 1274               		.size	read_chars, .-read_chars
 1275               		.section	.rodata.str1.1
 1276               	.LC15:
 1277 00b6 746F 6F20 		.string	"too many arguments"
 1277      6D61 6E79 
 1277      2061 7267 
 1277      756D 656E 
 1277      7473 00
 1278               	.LC16:
 1279 00c9 696E 7661 		.string	"invalid option"
GAS LISTING /tmp/ccSoRxjN.s 			page 24


 1279      6C69 6420 
 1279      6F70 7469 
 1279      6F6E 00
 1280               	.LC17:
 1281 00d8 696E 7661 		.string	"invalid format"
 1281      6C69 6420 
 1281      666F 726D 
 1281      6174 00
 1282               		.section	.text.g_read,"ax",@progbits
 1283               		.type	g_read, @function
 1284               	g_read:
 1285 0000 2F92      		push r2
 1286 0002 3F92      		push r3
 1287 0004 4F92      		push r4
 1288 0006 5F92      		push r5
 1289 0008 6F92      		push r6
 1290 000a 7F92      		push r7
 1291 000c 8F92      		push r8
 1292 000e 9F92      		push r9
 1293 0010 AF92      		push r10
 1294 0012 BF92      		push r11
 1295 0014 CF92      		push r12
 1296 0016 DF92      		push r13
 1297 0018 EF92      		push r14
 1298 001a FF92      		push r15
 1299 001c 0F93      		push r16
 1300 001e 1F93      		push r17
 1301 0020 CF93      		push r28
 1302 0022 DF93      		push r29
 1303 0024 00D0      		rcall .
 1304 0026 1F92      		push __zero_reg__
 1305 0028 CDB7      		in r28,__SP_L__
 1306 002a DEB7      		in r29,__SP_H__
 1307               	/* prologue: function */
 1308               	/* frame size = 4 */
 1309               	/* stack size = 22 */
 1310               	.L__stack_usage = 22
 1311 002c 8C01      		movw r16,r24
 1312 002e 2B01      		movw r4,r22
 1313 0030 5A01      		movw r10,r20
 1314 0032 0E94 0000 		call lua_gettop
 1315 0036 6C01      		movw r12,r24
 1316 0038 C201      		movw r24,r4
 1317 003a 0E94 0000 		call clearerr
 1318 003e 21E0      		ldi r18,1
 1319 0040 C216      		cp r12,r18
 1320 0042 D104      		cpc r13,__zero_reg__
 1321 0044 01F4      		brne .L98
 1322 0046 B201      		movw r22,r4
 1323 0048 C801      		movw r24,r16
 1324 004a 0E94 0000 		call read_line
 1325 004e 3C01      		movw r6,r24
 1326 0050 7501      		movw r14,r10
 1327 0052 8FEF      		ldi r24,-1
 1328 0054 E81A      		sub r14,r24
 1329 0056 F80A      		sbc r15,r24
 1330 0058 00C0      		rjmp .L99
GAS LISTING /tmp/ccSoRxjN.s 			page 25


 1331               	.L98:
 1332 005a B601      		movw r22,r12
 1333 005c 6D5E      		subi r22,-19
 1334 005e 7F4F      		sbci r23,-1
 1335 0060 40E0      		ldi r20,lo8(.LC15)
 1336 0062 50E0      		ldi r21,hi8(.LC15)
 1337 0064 C801      		movw r24,r16
 1338 0066 0E94 0000 		call luaL_checkstack
 1339 006a 7501      		movw r14,r10
 1340 006c 6624      		clr r6
 1341 006e 6394      		inc r6
 1342 0070 712C      		mov r7,__zero_reg__
 1343 0072 FE01      		movw r30,r28
 1344 0074 3196      		adiw r30,1
 1345 0076 1F01      		movw r2,r30
 1346 0078 20E0      		ldi r18,lo8(.LC6)
 1347 007a 822E      		mov r8,r18
 1348 007c 20E0      		ldi r18,hi8(.LC6)
 1349 007e 922E      		mov r9,r18
 1350               	.L100:
 1351 0080 81E0      		ldi r24,1
 1352 0082 C816      		cp r12,r24
 1353 0084 D104      		cpc r13,__zero_reg__
 1354 0086 01F4      		brne .+2
 1355 0088 00C0      		rjmp .L99
 1356 008a 6114      		cp r6,__zero_reg__
 1357 008c 7104      		cpc r7,__zero_reg__
 1358 008e 01F4      		brne .+2
 1359 0090 00C0      		rjmp .L99
 1360 0092 B701      		movw r22,r14
 1361 0094 C801      		movw r24,r16
 1362 0096 0E94 0000 		call lua_type
 1363 009a 0597      		sbiw r24,5
 1364 009c 01F4      		brne .L101
 1365 009e B701      		movw r22,r14
 1366 00a0 C801      		movw r24,r16
 1367 00a2 0E94 0000 		call lua_tointeger
 1368 00a6 0097      		sbiw r24,0
 1369 00a8 01F4      		brne .L102
 1370 00aa C201      		movw r24,r4
 1371 00ac 0E94 0000 		call getc
 1372 00b0 3C01      		movw r6,r24
 1373 00b2 B201      		movw r22,r4
 1374 00b4 0E94 0000 		call ungetc
 1375 00b8 40E0      		ldi r20,0
 1376 00ba 50E0      		ldi r21,0
 1377 00bc 60E0      		ldi r22,0
 1378 00be 70E0      		ldi r23,0
 1379 00c0 C801      		movw r24,r16
 1380 00c2 0E94 0000 		call lua_pushlstring
 1381 00c6 91E0      		ldi r25,lo8(1)
 1382 00c8 80E0      		ldi r24,0
 1383 00ca 6720      		and r6,r7
 1384 00cc 6094      		com r6
 1385 00ce 01F4      		brne .L103
 1386 00d0 90E0      		ldi r25,0
 1387               	.L103:
GAS LISTING /tmp/ccSoRxjN.s 			page 26


 1388 00d2 692E      		mov r6,r25
 1389 00d4 782E      		mov r7,r24
 1390 00d6 00C0      		rjmp .L104
 1391               	.L102:
 1392 00d8 AC01      		movw r20,r24
 1393 00da B201      		movw r22,r4
 1394 00dc C801      		movw r24,r16
 1395 00de 0E94 0000 		call read_chars
 1396 00e2 00C0      		rjmp .L128
 1397               	.L101:
 1398 00e4 40E0      		ldi r20,0
 1399 00e6 50E0      		ldi r21,0
 1400 00e8 B701      		movw r22,r14
 1401 00ea C801      		movw r24,r16
 1402 00ec 0E94 0000 		call lua_tolstring
 1403 00f0 3C01      		movw r6,r24
 1404 00f2 0097      		sbiw r24,0
 1405 00f4 01F0      		breq .L105
 1406 00f6 FC01      		movw r30,r24
 1407 00f8 8081      		ld r24,Z
 1408 00fa 8A32      		cpi r24,lo8(42)
 1409 00fc 01F0      		breq .L106
 1410               	.L105:
 1411 00fe 40E0      		ldi r20,lo8(.LC16)
 1412 0100 50E0      		ldi r21,hi8(.LC16)
 1413 0102 B701      		movw r22,r14
 1414 0104 C801      		movw r24,r16
 1415 0106 0E94 0000 		call luaL_argerror
 1416               	.L106:
 1417 010a F301      		movw r30,r6
 1418 010c 8181      		ldd r24,Z+1
 1419 010e 8C36      		cpi r24,lo8(108)
 1420 0110 01F0      		breq .L108
 1421 0112 8E36      		cpi r24,lo8(110)
 1422 0114 01F0      		breq .L109
 1423 0116 8136      		cpi r24,lo8(97)
 1424 0118 01F4      		brne .L126
 1425 011a 4FEF      		ldi r20,lo8(-1)
 1426 011c 5FEF      		ldi r21,lo8(-1)
 1427 011e B201      		movw r22,r4
 1428 0120 C801      		movw r24,r16
 1429 0122 0E94 0000 		call read_chars
 1430 0126 00C0      		rjmp .L127
 1431               	.L109:
 1432 0128 3F92      		push r3
 1433 012a 2F92      		push r2
 1434 012c 9F92      		push r9
 1435 012e 8F92      		push r8
 1436 0130 5F92      		push r5
 1437 0132 4F92      		push r4
 1438 0134 0E94 0000 		call fscanf
 1439 0138 0F90      		pop __tmp_reg__
 1440 013a 0F90      		pop __tmp_reg__
 1441 013c 0F90      		pop __tmp_reg__
 1442 013e 0F90      		pop __tmp_reg__
 1443 0140 0F90      		pop __tmp_reg__
 1444 0142 0F90      		pop __tmp_reg__
GAS LISTING /tmp/ccSoRxjN.s 			page 27


 1445 0144 0197      		sbiw r24,1
 1446 0146 01F4      		brne .L116
 1447 0148 4981      		ldd r20,Y+1
 1448 014a 5A81      		ldd r21,Y+2
 1449 014c 6B81      		ldd r22,Y+3
 1450 014e 7C81      		ldd r23,Y+4
 1451 0150 C801      		movw r24,r16
 1452 0152 0E94 0000 		call lua_pushnumber
 1453 0156 00C0      		rjmp .L127
 1454               	.L116:
 1455 0158 612C      		mov r6,__zero_reg__
 1456 015a 712C      		mov r7,__zero_reg__
 1457 015c 00C0      		rjmp .L104
 1458               	.L108:
 1459 015e B201      		movw r22,r4
 1460 0160 C801      		movw r24,r16
 1461 0162 0E94 0000 		call read_line
 1462               	.L128:
 1463 0166 3C01      		movw r6,r24
 1464 0168 00C0      		rjmp .L104
 1465               	.L127:
 1466 016a 6624      		clr r6
 1467 016c 6394      		inc r6
 1468 016e 712C      		mov r7,__zero_reg__
 1469 0170 00C0      		rjmp .L104
 1470               	.L126:
 1471 0172 40E0      		ldi r20,lo8(.LC17)
 1472 0174 50E0      		ldi r21,hi8(.LC17)
 1473 0176 B701      		movw r22,r14
 1474 0178 C801      		movw r24,r16
 1475 017a 0E94 0000 		call luaL_argerror
 1476 017e 00C0      		rjmp .L112
 1477               	.L104:
 1478 0180 FFEF      		ldi r31,-1
 1479 0182 EF1A      		sub r14,r31
 1480 0184 FF0A      		sbc r15,r31
 1481 0186 21E0      		ldi r18,1
 1482 0188 C21A      		sub r12,r18
 1483 018a D108      		sbc r13,__zero_reg__
 1484 018c 00C0      		rjmp .L100
 1485               	.L99:
 1486 018e C201      		movw r24,r4
 1487 0190 0E94 0000 		call ferror
 1488 0194 892B      		or r24,r25
 1489 0196 01F0      		breq .L114
 1490 0198 40E0      		ldi r20,0
 1491 019a 50E0      		ldi r21,0
 1492 019c 60E0      		ldi r22,0
 1493 019e 70E0      		ldi r23,0
 1494 01a0 C801      		movw r24,r16
 1495 01a2 0E94 0000 		call pushresult
 1496 01a6 00C0      		rjmp .L112
 1497               	.L114:
 1498 01a8 6728      		or r6,r7
 1499 01aa 01F4      		brne .L115
 1500 01ac 6EEF      		ldi r22,lo8(-2)
 1501 01ae 7FEF      		ldi r23,lo8(-1)
GAS LISTING /tmp/ccSoRxjN.s 			page 28


 1502 01b0 C801      		movw r24,r16
 1503 01b2 0E94 0000 		call lua_settop
 1504 01b6 C801      		movw r24,r16
 1505 01b8 0E94 0000 		call lua_pushnil
 1506               	.L115:
 1507 01bc C701      		movw r24,r14
 1508 01be 8A19      		sub r24,r10
 1509 01c0 9B09      		sbc r25,r11
 1510               	.L112:
 1511               	/* epilogue start */
 1512 01c2 0F90      		pop __tmp_reg__
 1513 01c4 0F90      		pop __tmp_reg__
 1514 01c6 0F90      		pop __tmp_reg__
 1515 01c8 0F90      		pop __tmp_reg__
 1516 01ca DF91      		pop r29
 1517 01cc CF91      		pop r28
 1518 01ce 1F91      		pop r17
 1519 01d0 0F91      		pop r16
 1520 01d2 FF90      		pop r15
 1521 01d4 EF90      		pop r14
 1522 01d6 DF90      		pop r13
 1523 01d8 CF90      		pop r12
 1524 01da BF90      		pop r11
 1525 01dc AF90      		pop r10
 1526 01de 9F90      		pop r9
 1527 01e0 8F90      		pop r8
 1528 01e2 7F90      		pop r7
 1529 01e4 6F90      		pop r6
 1530 01e6 5F90      		pop r5
 1531 01e8 4F90      		pop r4
 1532 01ea 3F90      		pop r3
 1533 01ec 2F90      		pop r2
 1534 01ee 0895      		ret
 1535               		.size	g_read, .-g_read
 1536               		.section	.text.io_read,"ax",@progbits
 1537               		.type	io_read, @function
 1538               	io_read:
 1539 0000 CF93      		push r28
 1540 0002 DF93      		push r29
 1541               	/* prologue: function */
 1542               	/* frame size = 0 */
 1543               	/* stack size = 2 */
 1544               	.L__stack_usage = 2
 1545 0004 EC01      		movw r28,r24
 1546 0006 61E0      		ldi r22,lo8(1)
 1547 0008 70E0      		ldi r23,0
 1548 000a 0E94 0000 		call getiofile
 1549 000e 41E0      		ldi r20,lo8(1)
 1550 0010 50E0      		ldi r21,0
 1551 0012 BC01      		movw r22,r24
 1552 0014 CE01      		movw r24,r28
 1553               	/* epilogue start */
 1554 0016 DF91      		pop r29
 1555 0018 CF91      		pop r28
 1556 001a 0C94 0000 		jmp g_read
 1557               		.size	io_read, .-io_read
 1558               		.section	.text.f_read,"ax",@progbits
GAS LISTING /tmp/ccSoRxjN.s 			page 29


 1559               		.type	f_read, @function
 1560               	f_read:
 1561 0000 CF93      		push r28
 1562 0002 DF93      		push r29
 1563               	/* prologue: function */
 1564               	/* frame size = 0 */
 1565               	/* stack size = 2 */
 1566               	.L__stack_usage = 2
 1567 0004 EC01      		movw r28,r24
 1568 0006 0E94 0000 		call tofile
 1569 000a 42E0      		ldi r20,lo8(2)
 1570 000c 50E0      		ldi r21,0
 1571 000e BC01      		movw r22,r24
 1572 0010 CE01      		movw r24,r28
 1573               	/* epilogue start */
 1574 0012 DF91      		pop r29
 1575 0014 CF91      		pop r28
 1576 0016 0C94 0000 		jmp g_read
 1577               		.size	f_read, .-f_read
 1578               		.section	.rodata.str1.1
 1579               	.LC18:
 1580 00e7 6669 6C65 		.string	"file is already closed"
 1580      2069 7320 
 1580      616C 7265 
 1580      6164 7920 
 1580      636C 6F73 
 1581               		.section	.text.io_readline,"ax",@progbits
 1582               		.type	io_readline, @function
 1583               	io_readline:
 1584 0000 EF92      		push r14
 1585 0002 FF92      		push r15
 1586 0004 0F93      		push r16
 1587 0006 1F93      		push r17
 1588 0008 CF93      		push r28
 1589 000a DF93      		push r29
 1590               	/* prologue: function */
 1591               	/* frame size = 0 */
 1592               	/* stack size = 6 */
 1593               	.L__stack_usage = 6
 1594 000c D82F      		mov r29,r24
 1595 000e C92F      		mov r28,r25
 1596 0010 6DEE      		ldi r22,lo8(-19)
 1597 0012 78ED      		ldi r23,lo8(-40)
 1598 0014 0E94 0000 		call lua_touserdata
 1599 0018 FC01      		movw r30,r24
 1600 001a 0081      		ld r16,Z
 1601 001c 1181      		ldd r17,Z+1
 1602 001e 0115      		cp r16,__zero_reg__
 1603 0020 1105      		cpc r17,__zero_reg__
 1604 0022 01F4      		brne .L132
 1605 0024 80E0      		ldi r24,lo8(.LC18)
 1606 0026 90E0      		ldi r25,hi8(.LC18)
 1607 0028 9F93      		push r25
 1608 002a 8F93      		push r24
 1609 002c CF93      		push r28
 1610 002e DF93      		push r29
 1611 0030 0E94 0000 		call luaL_error
GAS LISTING /tmp/ccSoRxjN.s 			page 30


 1612 0034 0F90      		pop __tmp_reg__
 1613 0036 0F90      		pop __tmp_reg__
 1614 0038 0F90      		pop __tmp_reg__
 1615 003a 0F90      		pop __tmp_reg__
 1616               	.L132:
 1617 003c B801      		movw r22,r16
 1618 003e 8D2F      		mov r24,r29
 1619 0040 9C2F      		mov r25,r28
 1620 0042 0E94 0000 		call read_line
 1621 0046 7C01      		movw r14,r24
 1622 0048 C801      		movw r24,r16
 1623 004a 0E94 0000 		call ferror
 1624 004e 892B      		or r24,r25
 1625 0050 01F0      		breq .L133
 1626 0052 80E0      		ldi r24,lo8(.LC0)
 1627 0054 90E0      		ldi r25,hi8(.LC0)
 1628 0056 9F93      		push r25
 1629 0058 8F93      		push r24
 1630 005a 80E0      		ldi r24,lo8(.LC2)
 1631 005c 90E0      		ldi r25,hi8(.LC2)
 1632 005e 9F93      		push r25
 1633 0060 8F93      		push r24
 1634 0062 CF93      		push r28
 1635 0064 DF93      		push r29
 1636 0066 0E94 0000 		call luaL_error
 1637 006a 0F90      		pop __tmp_reg__
 1638 006c 0F90      		pop __tmp_reg__
 1639 006e 0F90      		pop __tmp_reg__
 1640 0070 0F90      		pop __tmp_reg__
 1641 0072 0F90      		pop __tmp_reg__
 1642 0074 0F90      		pop __tmp_reg__
 1643 0076 00C0      		rjmp .L134
 1644               	.L133:
 1645 0078 EF28      		or r14,r15
 1646 007a 01F4      		brne .L135
 1647 007c 6CEE      		ldi r22,lo8(-20)
 1648 007e 78ED      		ldi r23,lo8(-40)
 1649 0080 8D2F      		mov r24,r29
 1650 0082 9C2F      		mov r25,r28
 1651 0084 0E94 0000 		call lua_toboolean
 1652 0088 0097      		sbiw r24,0
 1653 008a 01F0      		breq .L134
 1654 008c 60E0      		ldi r22,0
 1655 008e 70E0      		ldi r23,0
 1656 0090 8D2F      		mov r24,r29
 1657 0092 9C2F      		mov r25,r28
 1658 0094 0E94 0000 		call lua_settop
 1659 0098 6DEE      		ldi r22,lo8(-19)
 1660 009a 78ED      		ldi r23,lo8(-40)
 1661 009c 8D2F      		mov r24,r29
 1662 009e 9C2F      		mov r25,r28
 1663 00a0 0E94 0000 		call lua_pushvalue
 1664 00a4 8D2F      		mov r24,r29
 1665 00a6 9C2F      		mov r25,r28
 1666 00a8 0E94 0000 		call aux_close
 1667 00ac 80E0      		ldi r24,0
 1668 00ae 90E0      		ldi r25,0
GAS LISTING /tmp/ccSoRxjN.s 			page 31


 1669 00b0 00C0      		rjmp .L134
 1670               	.L135:
 1671 00b2 81E0      		ldi r24,lo8(1)
 1672 00b4 90E0      		ldi r25,0
 1673               	.L134:
 1674               	/* epilogue start */
 1675 00b6 DF91      		pop r29
 1676 00b8 CF91      		pop r28
 1677 00ba 1F91      		pop r17
 1678 00bc 0F91      		pop r16
 1679 00be FF90      		pop r15
 1680 00c0 EF90      		pop r14
 1681 00c2 0895      		ret
 1682               		.size	io_readline, .-io_readline
 1683               		.section	.rodata.str1.1
 1684               	.LC19:
 1685 00fe 6375 7200 		.string	"cur"
 1686               		.section	.text.f_seek,"ax",@progbits
 1687               		.type	f_seek, @function
 1688               	f_seek:
 1689 0000 EF92      		push r14
 1690 0002 FF92      		push r15
 1691 0004 0F93      		push r16
 1692 0006 1F93      		push r17
 1693 0008 CF93      		push r28
 1694 000a DF93      		push r29
 1695               	/* prologue: function */
 1696               	/* frame size = 0 */
 1697               	/* stack size = 6 */
 1698               	.L__stack_usage = 6
 1699 000c EC01      		movw r28,r24
 1700 000e 0E94 0000 		call tofile
 1701 0012 7C01      		movw r14,r24
 1702 0014 20E0      		ldi r18,lo8(modenames.3064)
 1703 0016 30E0      		ldi r19,hi8(modenames.3064)
 1704 0018 40E0      		ldi r20,lo8(.LC19)
 1705 001a 50E0      		ldi r21,hi8(.LC19)
 1706 001c 62E0      		ldi r22,lo8(2)
 1707 001e 70E0      		ldi r23,0
 1708 0020 CE01      		movw r24,r28
 1709 0022 0E94 0000 		call luaL_checkoption
 1710 0026 8C01      		movw r16,r24
 1711 0028 40E0      		ldi r20,0
 1712 002a 50E0      		ldi r21,0
 1713 002c 63E0      		ldi r22,lo8(3)
 1714 002e 70E0      		ldi r23,0
 1715 0030 CE01      		movw r24,r28
 1716 0032 0E94 0000 		call luaL_optinteger
 1717 0036 000F      		lsl r16
 1718 0038 111F      		rol r17
 1719 003a F801      		movw r30,r16
 1720 003c E050      		subi r30,lo8(-(mode.3063))
 1721 003e F040      		sbci r31,hi8(-(mode.3063))
 1722 0040 2081      		ld r18,Z
 1723 0042 3181      		ldd r19,Z+1
 1724 0044 AC01      		movw r20,r24
 1725 0046 990F      		lsl r25
GAS LISTING /tmp/ccSoRxjN.s 			page 32


 1726 0048 660B      		sbc r22,r22
 1727 004a 770B      		sbc r23,r23
 1728 004c C701      		movw r24,r14
 1729 004e 0E94 0000 		call fseek
 1730 0052 892B      		or r24,r25
 1731 0054 01F0      		breq .L140
 1732 0056 40E0      		ldi r20,0
 1733 0058 50E0      		ldi r21,0
 1734 005a 60E0      		ldi r22,0
 1735 005c 70E0      		ldi r23,0
 1736 005e CE01      		movw r24,r28
 1737               	/* epilogue start */
 1738 0060 DF91      		pop r29
 1739 0062 CF91      		pop r28
 1740 0064 1F91      		pop r17
 1741 0066 0F91      		pop r16
 1742 0068 FF90      		pop r15
 1743 006a EF90      		pop r14
 1744 006c 0C94 0000 		jmp pushresult
 1745               	.L140:
 1746 0070 C701      		movw r24,r14
 1747 0072 0E94 0000 		call ftell
 1748 0076 CE01      		movw r24,r28
 1749 0078 0E94 0000 		call lua_pushinteger
 1750 007c 81E0      		ldi r24,lo8(1)
 1751 007e 90E0      		ldi r25,0
 1752               	/* epilogue start */
 1753 0080 DF91      		pop r29
 1754 0082 CF91      		pop r28
 1755 0084 1F91      		pop r17
 1756 0086 0F91      		pop r16
 1757 0088 FF90      		pop r15
 1758 008a EF90      		pop r14
 1759 008c 0895      		ret
 1760               		.size	f_seek, .-f_seek
 1761               		.section	.text.fileerror.constprop.7,"ax",@progbits
 1762               		.type	fileerror.constprop.7, @function
 1763               	fileerror.constprop.7:
 1764 0000 CF93      		push r28
 1765 0002 DF93      		push r29
 1766               	/* prologue: function */
 1767               	/* frame size = 0 */
 1768               	/* stack size = 2 */
 1769               	.L__stack_usage = 2
 1770 0004 D82F      		mov r29,r24
 1771 0006 C92F      		mov r28,r25
 1772 0008 80E0      		ldi r24,lo8(.LC0)
 1773 000a 90E0      		ldi r25,hi8(.LC0)
 1774 000c 9F93      		push r25
 1775 000e 8F93      		push r24
 1776 0010 7F93      		push r23
 1777 0012 6F93      		push r22
 1778 0014 80E0      		ldi r24,lo8(.LC1)
 1779 0016 90E0      		ldi r25,hi8(.LC1)
 1780 0018 9F93      		push r25
 1781 001a 8F93      		push r24
 1782 001c CF93      		push r28
GAS LISTING /tmp/ccSoRxjN.s 			page 33


 1783 001e DF93      		push r29
 1784 0020 0E94 0000 		call lua_pushfstring
 1785 0024 40E0      		ldi r20,0
 1786 0026 50E0      		ldi r21,0
 1787 0028 6FEF      		ldi r22,lo8(-1)
 1788 002a 7FEF      		ldi r23,lo8(-1)
 1789 002c 8D2F      		mov r24,r29
 1790 002e 9C2F      		mov r25,r28
 1791 0030 0E94 0000 		call lua_tolstring
 1792 0034 2DB7      		in r18,__SP_L__
 1793 0036 3EB7      		in r19,__SP_H__
 1794 0038 285F      		subi r18,-8
 1795 003a 3F4F      		sbci r19,-1
 1796 003c 0FB6      		in __tmp_reg__,__SREG__
 1797 003e F894      		cli
 1798 0040 3EBF      		out __SP_H__,r19
 1799 0042 0FBE      		out __SREG__,__tmp_reg__
 1800 0044 2DBF      		out __SP_L__,r18
 1801 0046 AC01      		movw r20,r24
 1802 0048 61E0      		ldi r22,lo8(1)
 1803 004a 70E0      		ldi r23,0
 1804 004c 8D2F      		mov r24,r29
 1805 004e 9C2F      		mov r25,r28
 1806               	/* epilogue start */
 1807 0050 DF91      		pop r29
 1808 0052 CF91      		pop r28
 1809 0054 0C94 0000 		jmp luaL_argerror
 1810               		.size	fileerror.constprop.7, .-fileerror.constprop.7
 1811               		.section	.text.g_iofile,"ax",@progbits
 1812               		.type	g_iofile, @function
 1813               	g_iofile:
 1814 0000 AF92      		push r10
 1815 0002 BF92      		push r11
 1816 0004 CF92      		push r12
 1817 0006 DF92      		push r13
 1818 0008 EF92      		push r14
 1819 000a FF92      		push r15
 1820 000c 0F93      		push r16
 1821 000e 1F93      		push r17
 1822 0010 CF93      		push r28
 1823 0012 DF93      		push r29
 1824               	/* prologue: function */
 1825               	/* frame size = 0 */
 1826               	/* stack size = 10 */
 1827               	.L__stack_usage = 10
 1828 0014 EC01      		movw r28,r24
 1829 0016 7B01      		movw r14,r22
 1830 0018 5A01      		movw r10,r20
 1831 001a 61E0      		ldi r22,lo8(1)
 1832 001c 70E0      		ldi r23,0
 1833 001e 0E94 0000 		call lua_type
 1834 0022 1816      		cp __zero_reg__,r24
 1835 0024 1906      		cpc __zero_reg__,r25
 1836 0026 04F4      		brge .L143
 1837 0028 40E0      		ldi r20,0
 1838 002a 50E0      		ldi r21,0
 1839 002c 61E0      		ldi r22,lo8(1)
GAS LISTING /tmp/ccSoRxjN.s 			page 34


 1840 002e 70E0      		ldi r23,0
 1841 0030 CE01      		movw r24,r28
 1842 0032 0E94 0000 		call lua_tolstring
 1843 0036 8C01      		movw r16,r24
 1844 0038 CE01      		movw r24,r28
 1845 003a 0115      		cp r16,__zero_reg__
 1846 003c 1105      		cpc r17,__zero_reg__
 1847 003e 01F0      		breq .L144
 1848 0040 0E94 0000 		call newfile
 1849 0044 6C01      		movw r12,r24
 1850 0046 B501      		movw r22,r10
 1851 0048 C801      		movw r24,r16
 1852 004a 0E94 0000 		call fopen
 1853 004e F601      		movw r30,r12
 1854 0050 9183      		std Z+1,r25
 1855 0052 8083      		st Z,r24
 1856 0054 892B      		or r24,r25
 1857 0056 01F4      		brne .L145
 1858 0058 B801      		movw r22,r16
 1859 005a CE01      		movw r24,r28
 1860 005c 0E94 0000 		call fileerror.constprop.7
 1861 0060 00C0      		rjmp .L145
 1862               	.L144:
 1863 0062 0E94 0000 		call tofile
 1864 0066 61E0      		ldi r22,lo8(1)
 1865 0068 70E0      		ldi r23,0
 1866 006a CE01      		movw r24,r28
 1867 006c 0E94 0000 		call lua_pushvalue
 1868               	.L145:
 1869 0070 A701      		movw r20,r14
 1870 0072 6FEE      		ldi r22,lo8(-17)
 1871 0074 78ED      		ldi r23,lo8(-40)
 1872 0076 CE01      		movw r24,r28
 1873 0078 0E94 0000 		call lua_rawseti
 1874               	.L143:
 1875 007c A701      		movw r20,r14
 1876 007e 6FEE      		ldi r22,lo8(-17)
 1877 0080 78ED      		ldi r23,lo8(-40)
 1878 0082 CE01      		movw r24,r28
 1879 0084 0E94 0000 		call lua_rawgeti
 1880 0088 81E0      		ldi r24,lo8(1)
 1881 008a 90E0      		ldi r25,0
 1882               	/* epilogue start */
 1883 008c DF91      		pop r29
 1884 008e CF91      		pop r28
 1885 0090 1F91      		pop r17
 1886 0092 0F91      		pop r16
 1887 0094 FF90      		pop r15
 1888 0096 EF90      		pop r14
 1889 0098 DF90      		pop r13
 1890 009a CF90      		pop r12
 1891 009c BF90      		pop r11
 1892 009e AF90      		pop r10
 1893 00a0 0895      		ret
 1894               		.size	g_iofile, .-g_iofile
 1895               		.section	.rodata.str1.1
 1896               	.LC20:
GAS LISTING /tmp/ccSoRxjN.s 			page 35


 1897 0102 7700      		.string	"w"
 1898               		.section	.text.io_output,"ax",@progbits
 1899               		.type	io_output, @function
 1900               	io_output:
 1901               	/* prologue: function */
 1902               	/* frame size = 0 */
 1903               	/* stack size = 0 */
 1904               	.L__stack_usage = 0
 1905 0000 40E0      		ldi r20,lo8(.LC20)
 1906 0002 50E0      		ldi r21,hi8(.LC20)
 1907 0004 62E0      		ldi r22,lo8(2)
 1908 0006 70E0      		ldi r23,0
 1909 0008 0C94 0000 		jmp g_iofile
 1910               		.size	io_output, .-io_output
 1911               		.section	.text.io_input,"ax",@progbits
 1912               		.type	io_input, @function
 1913               	io_input:
 1914               	/* prologue: function */
 1915               	/* frame size = 0 */
 1916               	/* stack size = 0 */
 1917               	.L__stack_usage = 0
 1918 0000 40E0      		ldi r20,lo8(.LC7)
 1919 0002 50E0      		ldi r21,hi8(.LC7)
 1920 0004 61E0      		ldi r22,lo8(1)
 1921 0006 70E0      		ldi r23,0
 1922 0008 0C94 0000 		jmp g_iofile
 1923               		.size	io_input, .-io_input
 1924               		.section	.text.f_lines,"ax",@progbits
 1925               		.type	f_lines, @function
 1926               	f_lines:
 1927 0000 CF93      		push r28
 1928 0002 DF93      		push r29
 1929               	/* prologue: function */
 1930               	/* frame size = 0 */
 1931               	/* stack size = 2 */
 1932               	.L__stack_usage = 2
 1933 0004 EC01      		movw r28,r24
 1934 0006 0E94 0000 		call tofile
 1935 000a 61E0      		ldi r22,lo8(1)
 1936 000c 70E0      		ldi r23,0
 1937 000e CE01      		movw r24,r28
 1938 0010 0E94 0000 		call lua_pushvalue
 1939 0014 60E0      		ldi r22,0
 1940 0016 70E0      		ldi r23,0
 1941 0018 CE01      		movw r24,r28
 1942 001a 0E94 0000 		call lua_pushboolean
 1943 001e 42E0      		ldi r20,lo8(2)
 1944 0020 50E0      		ldi r21,0
 1945 0022 60E0      		ldi r22,lo8(gs(io_readline))
 1946 0024 70E0      		ldi r23,hi8(gs(io_readline))
 1947 0026 CE01      		movw r24,r28
 1948 0028 0E94 0000 		call lua_pushcclosure
 1949 002c 81E0      		ldi r24,lo8(1)
 1950 002e 90E0      		ldi r25,0
 1951               	/* epilogue start */
 1952 0030 DF91      		pop r29
 1953 0032 CF91      		pop r28
GAS LISTING /tmp/ccSoRxjN.s 			page 36


 1954 0034 0895      		ret
 1955               		.size	f_lines, .-f_lines
 1956               		.section	.text.io_lines,"ax",@progbits
 1957               		.type	io_lines, @function
 1958               	io_lines:
 1959 0000 EF92      		push r14
 1960 0002 FF92      		push r15
 1961 0004 0F93      		push r16
 1962 0006 1F93      		push r17
 1963 0008 CF93      		push r28
 1964 000a DF93      		push r29
 1965               	/* prologue: function */
 1966               	/* frame size = 0 */
 1967               	/* stack size = 6 */
 1968               	.L__stack_usage = 6
 1969 000c EC01      		movw r28,r24
 1970 000e 61E0      		ldi r22,lo8(1)
 1971 0010 70E0      		ldi r23,0
 1972 0012 0E94 0000 		call lua_type
 1973 0016 1816      		cp __zero_reg__,r24
 1974 0018 1906      		cpc __zero_reg__,r25
 1975 001a 04F0      		brlt .L150
 1976 001c 41E0      		ldi r20,lo8(1)
 1977 001e 50E0      		ldi r21,0
 1978 0020 6FEE      		ldi r22,lo8(-17)
 1979 0022 78ED      		ldi r23,lo8(-40)
 1980 0024 CE01      		movw r24,r28
 1981 0026 0E94 0000 		call lua_rawgeti
 1982 002a CE01      		movw r24,r28
 1983               	/* epilogue start */
 1984 002c DF91      		pop r29
 1985 002e CF91      		pop r28
 1986 0030 1F91      		pop r17
 1987 0032 0F91      		pop r16
 1988 0034 FF90      		pop r15
 1989 0036 EF90      		pop r14
 1990 0038 0C94 0000 		jmp f_lines
 1991               	.L150:
 1992 003c 40E0      		ldi r20,0
 1993 003e 50E0      		ldi r21,0
 1994 0040 61E0      		ldi r22,lo8(1)
 1995 0042 70E0      		ldi r23,0
 1996 0044 CE01      		movw r24,r28
 1997 0046 0E94 0000 		call luaL_checklstring
 1998 004a 8C01      		movw r16,r24
 1999 004c CE01      		movw r24,r28
 2000 004e 0E94 0000 		call newfile
 2001 0052 7C01      		movw r14,r24
 2002 0054 60E0      		ldi r22,lo8(.LC7)
 2003 0056 70E0      		ldi r23,hi8(.LC7)
 2004 0058 C801      		movw r24,r16
 2005 005a 0E94 0000 		call fopen
 2006 005e F701      		movw r30,r14
 2007 0060 9183      		std Z+1,r25
 2008 0062 8083      		st Z,r24
 2009 0064 892B      		or r24,r25
 2010 0066 01F4      		brne .L151
GAS LISTING /tmp/ccSoRxjN.s 			page 37


 2011 0068 B801      		movw r22,r16
 2012 006a CE01      		movw r24,r28
 2013 006c 0E94 0000 		call fileerror.constprop.7
 2014               	.L151:
 2015 0070 CE01      		movw r24,r28
 2016 0072 0E94 0000 		call lua_gettop
 2017 0076 BC01      		movw r22,r24
 2018 0078 CE01      		movw r24,r28
 2019 007a 0E94 0000 		call lua_pushvalue
 2020 007e 61E0      		ldi r22,lo8(1)
 2021 0080 70E0      		ldi r23,0
 2022 0082 CE01      		movw r24,r28
 2023 0084 0E94 0000 		call lua_pushboolean
 2024 0088 42E0      		ldi r20,lo8(2)
 2025 008a 50E0      		ldi r21,0
 2026 008c 60E0      		ldi r22,lo8(gs(io_readline))
 2027 008e 70E0      		ldi r23,hi8(gs(io_readline))
 2028 0090 CE01      		movw r24,r28
 2029 0092 0E94 0000 		call lua_pushcclosure
 2030 0096 81E0      		ldi r24,lo8(1)
 2031 0098 90E0      		ldi r25,0
 2032               	/* epilogue start */
 2033 009a DF91      		pop r29
 2034 009c CF91      		pop r28
 2035 009e 1F91      		pop r17
 2036 00a0 0F91      		pop r16
 2037 00a2 FF90      		pop r15
 2038 00a4 EF90      		pop r14
 2039 00a6 0895      		ret
 2040               		.size	io_lines, .-io_lines
 2041               		.section	.rodata.str1.1
 2042               	.LC21:
 2043 0104 5F5F 696E 		.string	"__index"
 2043      6465 7800 
 2044               	.LC22:
 2045 010c 696F 00   		.string	"io"
 2046               	.LC23:
 2047 010f 7374 6469 		.string	"stdin"
 2047      6E00 
 2048               	.LC24:
 2049 0115 7374 646F 		.string	"stdout"
 2049      7574 00
 2050               	.LC25:
 2051 011c 7374 6465 		.string	"stderr"
 2051      7272 00
 2052               	.LC26:
 2053 0123 706F 7065 		.string	"popen"
 2053      6E00 
 2054               		.section	.text.luaopen_io,"ax",@progbits
 2055               	.global	luaopen_io
 2056               		.type	luaopen_io, @function
 2057               	luaopen_io:
 2058 0000 0F93      		push r16
 2059 0002 1F93      		push r17
 2060 0004 CF93      		push r28
 2061 0006 DF93      		push r29
 2062               	/* prologue: function */
GAS LISTING /tmp/ccSoRxjN.s 			page 38


 2063               	/* frame size = 0 */
 2064               	/* stack size = 4 */
 2065               	.L__stack_usage = 4
 2066 0008 EC01      		movw r28,r24
 2067 000a 60E0      		ldi r22,lo8(.LC3)
 2068 000c 70E0      		ldi r23,hi8(.LC3)
 2069 000e 0E94 0000 		call luaL_newmetatable
 2070 0012 6FEF      		ldi r22,lo8(-1)
 2071 0014 7FEF      		ldi r23,lo8(-1)
 2072 0016 CE01      		movw r24,r28
 2073 0018 0E94 0000 		call lua_pushvalue
 2074 001c 40E0      		ldi r20,lo8(.LC21)
 2075 001e 50E0      		ldi r21,hi8(.LC21)
 2076 0020 6EEF      		ldi r22,lo8(-2)
 2077 0022 7FEF      		ldi r23,lo8(-1)
 2078 0024 CE01      		movw r24,r28
 2079 0026 0E94 0000 		call lua_setfield
 2080 002a 40E0      		ldi r20,lo8(flib)
 2081 002c 50E0      		ldi r21,hi8(flib)
 2082 002e 60E0      		ldi r22,0
 2083 0030 70E0      		ldi r23,0
 2084 0032 CE01      		movw r24,r28
 2085 0034 0E94 0000 		call luaL_register
 2086 0038 60E0      		ldi r22,lo8(gs(io_fclose))
 2087 003a 70E0      		ldi r23,hi8(gs(io_fclose))
 2088 003c CE01      		movw r24,r28
 2089 003e 0E94 0000 		call newfenv
 2090 0042 6FEE      		ldi r22,lo8(-17)
 2091 0044 78ED      		ldi r23,lo8(-40)
 2092 0046 CE01      		movw r24,r28
 2093 0048 0E94 0000 		call lua_replace
 2094 004c 40E0      		ldi r20,lo8(iolib)
 2095 004e 50E0      		ldi r21,hi8(iolib)
 2096 0050 60E0      		ldi r22,lo8(.LC22)
 2097 0052 70E0      		ldi r23,hi8(.LC22)
 2098 0054 CE01      		movw r24,r28
 2099 0056 0E94 0000 		call luaL_register
 2100 005a 60E0      		ldi r22,lo8(gs(io_noclose))
 2101 005c 70E0      		ldi r23,hi8(gs(io_noclose))
 2102 005e CE01      		movw r24,r28
 2103 0060 0E94 0000 		call newfenv
 2104 0064 00E0      		ldi r16,lo8(__iob)
 2105 0066 10E0      		ldi r17,hi8(__iob)
 2106 0068 F801      		movw r30,r16
 2107 006a 6081      		ld r22,Z
 2108 006c 7181      		ldd r23,Z+1
 2109 006e 20E0      		ldi r18,lo8(.LC23)
 2110 0070 30E0      		ldi r19,hi8(.LC23)
 2111 0072 41E0      		ldi r20,lo8(1)
 2112 0074 50E0      		ldi r21,0
 2113 0076 CE01      		movw r24,r28
 2114 0078 0E94 0000 		call createstdfile
 2115 007c F801      		movw r30,r16
 2116 007e 6281      		ldd r22,Z+2
 2117 0080 7381      		ldd r23,Z+3
 2118 0082 20E0      		ldi r18,lo8(.LC24)
 2119 0084 30E0      		ldi r19,hi8(.LC24)
GAS LISTING /tmp/ccSoRxjN.s 			page 39


 2120 0086 42E0      		ldi r20,lo8(2)
 2121 0088 50E0      		ldi r21,0
 2122 008a CE01      		movw r24,r28
 2123 008c 0E94 0000 		call createstdfile
 2124 0090 F801      		movw r30,r16
 2125 0092 6481      		ldd r22,Z+4
 2126 0094 7581      		ldd r23,Z+5
 2127 0096 20E0      		ldi r18,lo8(.LC25)
 2128 0098 30E0      		ldi r19,hi8(.LC25)
 2129 009a 40E0      		ldi r20,0
 2130 009c 50E0      		ldi r21,0
 2131 009e CE01      		movw r24,r28
 2132 00a0 0E94 0000 		call createstdfile
 2133 00a4 6EEF      		ldi r22,lo8(-2)
 2134 00a6 7FEF      		ldi r23,lo8(-1)
 2135 00a8 CE01      		movw r24,r28
 2136 00aa 0E94 0000 		call lua_settop
 2137 00ae 40E0      		ldi r20,lo8(.LC26)
 2138 00b0 50E0      		ldi r21,hi8(.LC26)
 2139 00b2 6FEF      		ldi r22,lo8(-1)
 2140 00b4 7FEF      		ldi r23,lo8(-1)
 2141 00b6 CE01      		movw r24,r28
 2142 00b8 0E94 0000 		call lua_getfield
 2143 00bc 60E0      		ldi r22,lo8(gs(io_pclose))
 2144 00be 70E0      		ldi r23,hi8(gs(io_pclose))
 2145 00c0 CE01      		movw r24,r28
 2146 00c2 0E94 0000 		call newfenv
 2147 00c6 6EEF      		ldi r22,lo8(-2)
 2148 00c8 7FEF      		ldi r23,lo8(-1)
 2149 00ca CE01      		movw r24,r28
 2150 00cc 0E94 0000 		call lua_setfenv
 2151 00d0 6EEF      		ldi r22,lo8(-2)
 2152 00d2 7FEF      		ldi r23,lo8(-1)
 2153 00d4 CE01      		movw r24,r28
 2154 00d6 0E94 0000 		call lua_settop
 2155 00da 81E0      		ldi r24,lo8(1)
 2156 00dc 90E0      		ldi r25,0
 2157               	/* epilogue start */
 2158 00de DF91      		pop r29
 2159 00e0 CF91      		pop r28
 2160 00e2 1F91      		pop r17
 2161 00e4 0F91      		pop r16
 2162 00e6 0895      		ret
 2163               		.size	luaopen_io, .-luaopen_io
 2164               		.section	.rodata
 2165               		.type	mode.3063, @object
 2166               		.size	mode.3063, 6
 2167               	mode.3063:
 2168 0000 0000      		.word	0
 2169 0002 0100      		.word	1
 2170 0004 0200      		.word	2
 2171               		.section	.rodata.str1.1
 2172               	.LC27:
 2173 0129 7365 7400 		.string	"set"
 2174               	.LC28:
 2175 012d 656E 6400 		.string	"end"
 2176               		.section	.rodata
GAS LISTING /tmp/ccSoRxjN.s 			page 40


 2177               		.type	modenames.3064, @object
 2178               		.size	modenames.3064, 8
 2179               	modenames.3064:
 2180 0006 0000      		.word	.LC27
 2181 0008 0000      		.word	.LC19
 2182 000a 0000      		.word	.LC28
 2183 000c 0000      		.word	0
 2184               		.section	.rodata.str1.1
 2185               	.LC29:
 2186 0131 636C 6F73 		.string	"close"
 2186      6500 
 2187               	.LC30:
 2188 0137 666C 7573 		.string	"flush"
 2188      6800 
 2189               	.LC31:
 2190 013d 6C69 6E65 		.string	"lines"
 2190      7300 
 2191               	.LC32:
 2192 0143 7265 6164 		.string	"read"
 2192      00
 2193               	.LC33:
 2194 0148 7365 656B 		.string	"seek"
 2194      00
 2195               	.LC34:
 2196 014d 7772 6974 		.string	"write"
 2196      6500 
 2197               	.LC35:
 2198 0153 5F5F 6763 		.string	"__gc"
 2198      00
 2199               	.LC36:
 2200 0158 5F5F 746F 		.string	"__tostring"
 2200      7374 7269 
 2200      6E67 00
 2201               		.section	.rodata
 2202               		.type	flib, @object
 2203               		.size	flib, 36
 2204               	flib:
 2205 000e 0000      		.word	.LC29
 2206 0010 0000      		.word	gs(io_close)
 2207 0012 0000      		.word	.LC30
 2208 0014 0000      		.word	gs(f_flush)
 2209 0016 0000      		.word	.LC31
 2210 0018 0000      		.word	gs(f_lines)
 2211 001a 0000      		.word	.LC32
 2212 001c 0000      		.word	gs(f_read)
 2213 001e 0000      		.word	.LC33
 2214 0020 0000      		.word	gs(f_seek)
 2215 0022 0000      		.word	.LC34
 2216 0024 0000      		.word	gs(f_write)
 2217 0026 0000      		.word	.LC35
 2218 0028 0000      		.word	gs(io_gc)
 2219 002a 0000      		.word	.LC36
 2220 002c 0000      		.word	gs(io_tostring)
 2221 002e 0000      		.word	0
 2222 0030 0000      		.word	0
 2223               		.section	.rodata.str1.1
 2224               	.LC37:
GAS LISTING /tmp/ccSoRxjN.s 			page 41


 2225 0163 696E 7075 		.string	"input"
 2225      7400 
 2226               	.LC38:
 2227 0169 6F70 656E 		.string	"open"
 2227      00
 2228               	.LC39:
 2229 016e 6F75 7470 		.string	"output"
 2229      7574 00
 2230               	.LC40:
 2231 0175 7479 7065 		.string	"type"
 2231      00
 2232               		.section	.rodata
 2233               		.type	iolib, @object
 2234               		.size	iolib, 44
 2235               	iolib:
 2236 0032 0000      		.word	.LC29
 2237 0034 0000      		.word	gs(io_close)
 2238 0036 0000      		.word	.LC30
 2239 0038 0000      		.word	gs(io_flush)
 2240 003a 0000      		.word	.LC37
 2241 003c 0000      		.word	gs(io_input)
 2242 003e 0000      		.word	.LC31
 2243 0040 0000      		.word	gs(io_lines)
 2244 0042 0000      		.word	.LC38
 2245 0044 0000      		.word	gs(io_open)
 2246 0046 0000      		.word	.LC39
 2247 0048 0000      		.word	gs(io_output)
 2248 004a 0000      		.word	.LC26
 2249 004c 0000      		.word	gs(io_popen)
 2250 004e 0000      		.word	.LC32
 2251 0050 0000      		.word	gs(io_read)
 2252 0052 0000      		.word	.LC40
 2253 0054 0000      		.word	gs(io_type)
 2254 0056 0000      		.word	.LC34
 2255 0058 0000      		.word	gs(io_write)
 2256 005a 0000      		.word	0
 2257 005c 0000      		.word	0
 2258               		.type	fnames, @object
 2259               		.size	fnames, 4
 2260               	fnames:
 2261 005e 0000      		.word	.LC37
 2262 0060 0000      		.word	.LC39
 2263               		.ident	"GCC: (GNU) 5.3.0"
 2264               	.global __do_copy_data
GAS LISTING /tmp/ccSoRxjN.s 			page 42


DEFINED SYMBOLS
                            *ABS*:0000000000000000 liolib.c
     /tmp/ccSoRxjN.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccSoRxjN.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccSoRxjN.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccSoRxjN.s:5      *ABS*:000000000000003b __RAMPZ__
     /tmp/ccSoRxjN.s:6      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccSoRxjN.s:7      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccSoRxjN.s:17     .text.pushresult:0000000000000000 pushresult
     /tmp/ccSoRxjN.s:106    .text.io_pclose:0000000000000000 io_pclose
     /tmp/ccSoRxjN.s:137    .text.io_noclose:0000000000000000 io_noclose
     /tmp/ccSoRxjN.s:164    .text.tofile:0000000000000000 tofile
     /tmp/ccSoRxjN.s:211    .text.g_write:0000000000000000 g_write
     /tmp/ccSoRxjN.s:347    .text.f_write:0000000000000000 f_write
     /tmp/ccSoRxjN.s:367    .text.read_line:0000000000000000 read_line
     /tmp/ccSoRxjN.s:482    .text.newfile:0000000000000000 newfile
     /tmp/ccSoRxjN.s:524    .text.io_popen:0000000000000000 io_popen
     /tmp/ccSoRxjN.s:586    .text.io_open:0000000000000000 io_open
     /tmp/ccSoRxjN.s:659    .text.aux_close:0000000000000000 aux_close
     /tmp/ccSoRxjN.s:689    .text.io_close:0000000000000000 io_close
     /tmp/ccSoRxjN.s:719    .text.io_gc:0000000000000000 io_gc
     /tmp/ccSoRxjN.s:749    .text.f_flush:0000000000000000 f_flush
     /tmp/ccSoRxjN.s:776    .text.io_fclose:0000000000000000 io_fclose
     /tmp/ccSoRxjN.s:818    .text.createstdfile:0000000000000000 createstdfile
     /tmp/ccSoRxjN.s:877    .text.newfenv:0000000000000000 newfenv
     /tmp/ccSoRxjN.s:917    .text.io_tostring:0000000000000000 io_tostring
     /tmp/ccSoRxjN.s:971    .text.getiofile:0000000000000000 getiofile
     /tmp/ccSoRxjN.s:2260   .rodata:000000000000005e fnames
     /tmp/ccSoRxjN.s:1034   .text.io_write:0000000000000000 io_write
     /tmp/ccSoRxjN.s:1056   .text.io_flush:0000000000000000 io_flush
     /tmp/ccSoRxjN.s:1090   .text.io_type:0000000000000000 io_type
     /tmp/ccSoRxjN.s:1166   .text.read_chars:0000000000000000 read_chars
     /tmp/ccSoRxjN.s:1284   .text.g_read:0000000000000000 g_read
     /tmp/ccSoRxjN.s:1538   .text.io_read:0000000000000000 io_read
     /tmp/ccSoRxjN.s:1560   .text.f_read:0000000000000000 f_read
     /tmp/ccSoRxjN.s:1583   .text.io_readline:0000000000000000 io_readline
     /tmp/ccSoRxjN.s:1688   .text.f_seek:0000000000000000 f_seek
     /tmp/ccSoRxjN.s:2179   .rodata:0000000000000006 modenames.3064
     /tmp/ccSoRxjN.s:2167   .rodata:0000000000000000 mode.3063
     /tmp/ccSoRxjN.s:1763   .text.fileerror.constprop.7:0000000000000000 fileerror.constprop.7
     /tmp/ccSoRxjN.s:1813   .text.g_iofile:0000000000000000 g_iofile
     /tmp/ccSoRxjN.s:1900   .text.io_output:0000000000000000 io_output
     /tmp/ccSoRxjN.s:1913   .text.io_input:0000000000000000 io_input
     /tmp/ccSoRxjN.s:1926   .text.f_lines:0000000000000000 f_lines
     /tmp/ccSoRxjN.s:1958   .text.io_lines:0000000000000000 io_lines
     /tmp/ccSoRxjN.s:2057   .text.luaopen_io:0000000000000000 luaopen_io
     /tmp/ccSoRxjN.s:2204   .rodata:000000000000000e flib
     /tmp/ccSoRxjN.s:2235   .rodata:0000000000000032 iolib

UNDEFINED SYMBOLS
lua_pushboolean
errno
lua_pushnil
lua_pushfstring
lua_pushinteger
luaL_checkudata
lua_pushlstring
GAS LISTING /tmp/ccSoRxjN.s 			page 43


luaL_error
lua_gettop
lua_type
lua_tonumber
fprintf
luaL_checklstring
fwrite
luaL_buffinit
luaL_prepbuffer
fgets
luaL_pushresult
lua_objlen
lua_newuserdata
lua_getfield
lua_setmetatable
luaL_optlstring
fopen
lua_getfenv
lua_tocfunction
lua_rawgeti
fflush
fclose
lua_pushvalue
lua_rawseti
lua_setfenv
lua_setfield
lua_createtable
lua_pushcclosure
lua_touserdata
luaL_checkany
lua_getmetatable
lua_rawequal
fread
clearerr
luaL_checkstack
lua_tointeger
getc
ungetc
lua_tolstring
luaL_argerror
fscanf
lua_pushnumber
ferror
lua_settop
lua_toboolean
luaL_checkoption
luaL_optinteger
fseek
ftell
luaL_newmetatable
luaL_register
lua_replace
__iob
__do_copy_data
