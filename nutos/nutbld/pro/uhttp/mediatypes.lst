GAS LISTING /tmp/cc58D5A2.s 			page 1


   1               		.file	"mediatypes.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.section	.text.MediaTypesFindByExt,"ax",@progbits
   9               	.global	MediaTypesFindByExt
  10               		.type	MediaTypesFindByExt, @function
  11               	MediaTypesFindByExt:
  12 0000 0F93      		push r16
  13 0002 1F93      		push r17
  14 0004 CF93      		push r28
  15 0006 DF93      		push r29
  16               	/* prologue: function */
  17               	/* frame size = 0 */
  18               	/* stack size = 4 */
  19               	.L__stack_usage = 4
  20 0008 8C01      		movw r16,r24
  21 000a C091 0000 		lds r28,mediaTypeList
  22 000e D091 0000 		lds r29,mediaTypeList+1
  23               	.L2:
  24 0012 2097      		sbiw r28,0
  25 0014 01F0      		breq .L4
  26 0016 B801      		movw r22,r16
  27 0018 CE01      		movw r24,r28
  28 001a 0C96      		adiw r24,12
  29 001c 0E94 0000 		call strcasecmp
  30 0020 1816      		cp __zero_reg__,r24
  31 0022 1906      		cpc __zero_reg__,r25
  32 0024 04F0      		brlt .L3
  33 0026 892B      		or r24,r25
  34 0028 01F0      		breq .L4
  35 002a C0E0      		ldi r28,0
  36 002c D0E0      		ldi r29,0
  37 002e 00C0      		rjmp .L4
  38               	.L3:
  39 0030 0A80      		ldd __tmp_reg__,Y+2
  40 0032 DB81      		ldd r29,Y+3
  41 0034 C02D      		mov r28,__tmp_reg__
  42 0036 00C0      		rjmp .L2
  43               	.L4:
  44 0038 CE01      		movw r24,r28
  45               	/* epilogue start */
  46 003a DF91      		pop r29
  47 003c CF91      		pop r28
  48 003e 1F91      		pop r17
  49 0040 0F91      		pop r16
  50 0042 0895      		ret
  51               		.size	MediaTypesFindByExt, .-MediaTypesFindByExt
  52               		.section	.rodata.str1.1,"aMS",@progbits,1
  53               	.LC0:
  54 0000 6874 6D6C 		.string	"html"
  54      00
  55               	.LC1:
  56 0005 7478 7400 		.string	"txt"
GAS LISTING /tmp/cc58D5A2.s 			page 2


  57               		.section	.text.GetMediaTypeEntry,"ax",@progbits
  58               	.global	GetMediaTypeEntry
  59               		.type	GetMediaTypeEntry, @function
  60               	GetMediaTypeEntry:
  61               	/* prologue: function */
  62               	/* frame size = 0 */
  63               	/* stack size = 0 */
  64               	.L__stack_usage = 0
  65 0000 0097      		sbiw r24,0
  66 0002 01F0      		breq .L9
  67 0004 FC01      		movw r30,r24
  68 0006 2081      		ld r18,Z
  69 0008 2111      		cpse r18,__zero_reg__
  70 000a 00C0      		rjmp .L10
  71               	.L9:
  72 000c 80E0      		ldi r24,lo8(.LC0)
  73 000e 90E0      		ldi r25,hi8(.LC0)
  74 0010 00C0      		rjmp .L19
  75               	.L10:
  76 0012 6EE2      		ldi r22,lo8(46)
  77 0014 70E0      		ldi r23,0
  78 0016 0E94 0000 		call strrchr
  79 001a 0097      		sbiw r24,0
  80 001c 01F0      		breq .L11
  81 001e 0196      		adiw r24,1
  82 0020 0E94 0000 		call MediaTypesFindByExt
  83 0024 0097      		sbiw r24,0
  84 0026 01F4      		brne .L12
  85               	.L11:
  86 0028 80E0      		ldi r24,lo8(.LC1)
  87 002a 90E0      		ldi r25,hi8(.LC1)
  88               	.L19:
  89 002c 0C94 0000 		jmp MediaTypesFindByExt
  90               	.L12:
  91 0030 0895      		ret
  92               		.size	GetMediaTypeEntry, .-GetMediaTypeEntry
  93               		.section	.rodata.str1.1
  94               	.LC2:
  95 0009 4672 6920 		.string	"Fri Feb  6 2016 23:13:47"
  95      4665 6220 
  95      2036 2032 
  95      3031 3620 
  95      3233 3A31 
  96               		.section	.text.MediaTypeHandlerBinary,"ax",@progbits
  97               	.global	MediaTypeHandlerBinary
  98               		.type	MediaTypeHandlerBinary, @function
  99               	MediaTypeHandlerBinary:
 100 0000 2F92      		push r2
 101 0002 3F92      		push r3
 102 0004 4F92      		push r4
 103 0006 5F92      		push r5
 104 0008 6F92      		push r6
 105 000a 7F92      		push r7
 106 000c 8F92      		push r8
 107 000e 9F92      		push r9
 108 0010 AF92      		push r10
 109 0012 BF92      		push r11
GAS LISTING /tmp/cc58D5A2.s 			page 3


 110 0014 CF92      		push r12
 111 0016 DF92      		push r13
 112 0018 EF92      		push r14
 113 001a FF92      		push r15
 114 001c 0F93      		push r16
 115 001e 1F93      		push r17
 116 0020 CF93      		push r28
 117 0022 DF93      		push r29
 118 0024 CDB7      		in r28,__SP_L__
 119 0026 DEB7      		in r29,__SP_H__
 120 0028 2D97      		sbiw r28,13
 121 002a 0FB6      		in __tmp_reg__,__SREG__
 122 002c F894      		cli
 123 002e DEBF      		out __SP_H__,r29
 124 0030 0FBE      		out __SREG__,__tmp_reg__
 125 0032 CDBF      		out __SP_L__,r28
 126               	/* prologue: function */
 127               	/* frame size = 13 */
 128               	/* stack size = 31 */
 129               	.L__stack_usage = 31
 130 0034 7C01      		movw r14,r24
 131 0036 8B01      		movw r16,r22
 132 0038 6A01      		movw r12,r20
 133 003a 84EB      		ldi r24,lo8(-76)
 134 003c 95E0      		ldi r25,lo8(5)
 135 003e 0E94 0000 		call malloc
 136 0042 1C01      		movw r2,r24
 137 0044 60E0      		ldi r22,0
 138 0046 70E8      		ldi r23,lo8(-128)
 139 0048 C601      		movw r24,r12
 140 004a 0E94 0000 		call _open
 141 004e 6C01      		movw r12,r24
 142 0050 8FEF      		ldi r24,-1
 143 0052 C816      		cp r12,r24
 144 0054 D806      		cpc r13,r24
 145 0056 01F4      		brne .L21
 146 0058 64E9      		ldi r22,lo8(-108)
 147 005a 71E0      		ldi r23,lo8(1)
 148 005c C701      		movw r24,r14
 149 005e 0E94 0000 		call HttpSendError
 150 0062 00C0      		rjmp .L22
 151               	.L21:
 152 0064 BE01      		movw r22,r28
 153 0066 6F5F      		subi r22,-1
 154 0068 7F4F      		sbci r23,-1
 155 006a C601      		movw r24,r12
 156 006c 0E94 0000 		call fstat
 157 0070 892B      		or r24,r25
 158 0072 01F0      		breq .L23
 159 0074 C601      		movw r24,r12
 160 0076 0E94 0000 		call _filelength
 161 007a 2B01      		movw r4,r22
 162 007c 3C01      		movw r6,r24
 163 007e 80E0      		ldi r24,lo8(.LC2)
 164 0080 90E0      		ldi r25,hi8(.LC2)
 165 0082 0E94 0000 		call RfcTimeParse
 166 0086 4B01      		movw r8,r22
GAS LISTING /tmp/cc58D5A2.s 			page 4


 167 0088 5C01      		movw r10,r24
 168 008a 00C0      		rjmp .L24
 169               	.L23:
 170 008c 4E80      		ldd r4,Y+6
 171 008e 5F80      		ldd r5,Y+7
 172 0090 6884      		ldd r6,Y+8
 173 0092 7984      		ldd r7,Y+9
 174 0094 8A84      		ldd r8,Y+10
 175 0096 9B84      		ldd r9,Y+11
 176 0098 AC84      		ldd r10,Y+12
 177 009a BD84      		ldd r11,Y+13
 178               	.L24:
 179 009c F701      		movw r30,r14
 180 009e 80A1      		ldd r24,Z+32
 181 00a0 91A1      		ldd r25,Z+33
 182 00a2 A2A1      		ldd r26,Z+34
 183 00a4 B3A1      		ldd r27,Z+35
 184 00a6 0097      		sbiw r24,0
 185 00a8 A105      		cpc r26,__zero_reg__
 186 00aa B105      		cpc r27,__zero_reg__
 187 00ac 01F0      		breq .L25
 188 00ae 4A85      		ldd r20,Y+10
 189 00b0 5B85      		ldd r21,Y+11
 190 00b2 6C85      		ldd r22,Y+12
 191 00b4 7D85      		ldd r23,Y+13
 192 00b6 8417      		cp r24,r20
 193 00b8 9507      		cpc r25,r21
 194 00ba A607      		cpc r26,r22
 195 00bc B707      		cpc r27,r23
 196 00be 04F0      		brlt .L25
 197 00c0 60E3      		ldi r22,lo8(48)
 198 00c2 71E0      		ldi r23,lo8(1)
 199 00c4 C701      		movw r24,r14
 200 00c6 0E94 0000 		call HttpSendError
 201 00ca 00C0      		rjmp .L26
 202               	.L25:
 203 00cc 68EC      		ldi r22,lo8(-56)
 204 00ce 70E0      		ldi r23,0
 205 00d0 C701      		movw r24,r14
 206 00d2 0E94 0000 		call HttpSendHeaderTop
 207 00d6 B501      		movw r22,r10
 208 00d8 A401      		movw r20,r8
 209 00da C701      		movw r24,r14
 210 00dc 0E94 0000 		call HttpSendHeaderDate
 211 00e0 F801      		movw r30,r16
 212 00e2 4681      		ldd r20,Z+6
 213 00e4 5781      		ldd r21,Z+7
 214 00e6 4115      		cp r20,__zero_reg__
 215 00e8 5105      		cpc r21,__zero_reg__
 216 00ea 01F4      		brne .L27
 217 00ec A801      		movw r20,r16
 218 00ee 445F      		subi r20,-12
 219 00f0 5F4F      		sbci r21,-1
 220               	.L27:
 221 00f2 F801      		movw r30,r16
 222 00f4 6481      		ldd r22,Z+4
 223 00f6 7581      		ldd r23,Z+5
GAS LISTING /tmp/cc58D5A2.s 			page 5


 224 00f8 9301      		movw r18,r6
 225 00fa 8201      		movw r16,r4
 226 00fc C701      		movw r24,r14
 227 00fe 0E94 0000 		call HttpSendHeaderBottom
 228               	.L29:
 229 0102 44EB      		ldi r20,lo8(-76)
 230 0104 55E0      		ldi r21,lo8(5)
 231 0106 B101      		movw r22,r2
 232 0108 C601      		movw r24,r12
 233 010a 0E94 0000 		call _read
 234 010e 8C01      		movw r16,r24
 235 0110 1816      		cp __zero_reg__,r24
 236 0112 1906      		cpc __zero_reg__,r25
 237 0114 04F4      		brge .L26
 238 0116 F701      		movw r30,r14
 239 0118 2081      		ld r18,Z
 240 011a 3181      		ldd r19,Z+1
 241 011c AC01      		movw r20,r24
 242 011e 61E0      		ldi r22,lo8(1)
 243 0120 70E0      		ldi r23,0
 244 0122 C101      		movw r24,r2
 245 0124 0E94 0000 		call fwrite
 246 0128 043B      		cpi r16,-76
 247 012a 1540      		sbci r17,5
 248 012c 01F0      		breq .L29
 249               	.L26:
 250 012e C601      		movw r24,r12
 251 0130 0E94 0000 		call _close
 252               	.L22:
 253 0134 F701      		movw r30,r14
 254 0136 8081      		ld r24,Z
 255 0138 9181      		ldd r25,Z+1
 256 013a 0E94 0000 		call fflush
 257 013e C101      		movw r24,r2
 258 0140 0E94 0000 		call free
 259 0144 80E0      		ldi r24,0
 260 0146 90E0      		ldi r25,0
 261               	/* epilogue start */
 262 0148 2D96      		adiw r28,13
 263 014a 0FB6      		in __tmp_reg__,__SREG__
 264 014c F894      		cli
 265 014e DEBF      		out __SP_H__,r29
 266 0150 0FBE      		out __SREG__,__tmp_reg__
 267 0152 CDBF      		out __SP_L__,r28
 268 0154 DF91      		pop r29
 269 0156 CF91      		pop r28
 270 0158 1F91      		pop r17
 271 015a 0F91      		pop r16
 272 015c FF90      		pop r15
 273 015e EF90      		pop r14
 274 0160 DF90      		pop r13
 275 0162 CF90      		pop r12
 276 0164 BF90      		pop r11
 277 0166 AF90      		pop r10
 278 0168 9F90      		pop r9
 279 016a 8F90      		pop r8
 280 016c 7F90      		pop r7
GAS LISTING /tmp/cc58D5A2.s 			page 6


 281 016e 6F90      		pop r6
 282 0170 5F90      		pop r5
 283 0172 4F90      		pop r4
 284 0174 3F90      		pop r3
 285 0176 2F90      		pop r2
 286 0178 0895      		ret
 287               		.size	MediaTypeHandlerBinary, .-MediaTypeHandlerBinary
 288               		.section	.text.MediaTypeHandlerText,"ax",@progbits
 289               	.global	MediaTypeHandlerText
 290               		.type	MediaTypeHandlerText, @function
 291               	MediaTypeHandlerText:
 292               	/* prologue: function */
 293               	/* frame size = 0 */
 294               	/* stack size = 0 */
 295               	.L__stack_usage = 0
 296 0000 0C94 0000 		jmp MediaTypeHandlerBinary
 297               		.size	MediaTypeHandlerText, .-MediaTypeHandlerText
 298               	.global	mediaTypeList
 299               		.section .bss
 300               		.type	mediaTypeList, @object
 301               		.size	mediaTypeList, 4
 302               	mediaTypeList:
 303 0000 0000 0000 		.zero	4
 304               		.ident	"GCC: (GNU) 5.3.0"
 305               	.global __do_copy_data
 306               	.global __do_clear_bss
GAS LISTING /tmp/cc58D5A2.s 			page 7


DEFINED SYMBOLS
                            *ABS*:0000000000000000 mediatypes.c
     /tmp/cc58D5A2.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/cc58D5A2.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/cc58D5A2.s:4      *ABS*:000000000000003f __SREG__
     /tmp/cc58D5A2.s:5      *ABS*:000000000000003b __RAMPZ__
     /tmp/cc58D5A2.s:6      *ABS*:0000000000000000 __tmp_reg__
     /tmp/cc58D5A2.s:7      *ABS*:0000000000000001 __zero_reg__
     /tmp/cc58D5A2.s:11     .text.MediaTypesFindByExt:0000000000000000 MediaTypesFindByExt
     /tmp/cc58D5A2.s:302    .bss:0000000000000000 mediaTypeList
     /tmp/cc58D5A2.s:60     .text.GetMediaTypeEntry:0000000000000000 GetMediaTypeEntry
     /tmp/cc58D5A2.s:99     .text.MediaTypeHandlerBinary:0000000000000000 MediaTypeHandlerBinary
     /tmp/cc58D5A2.s:291    .text.MediaTypeHandlerText:0000000000000000 MediaTypeHandlerText

UNDEFINED SYMBOLS
strcasecmp
strrchr
malloc
_open
HttpSendError
fstat
_filelength
RfcTimeParse
HttpSendHeaderTop
HttpSendHeaderDate
HttpSendHeaderBottom
_read
fwrite
_close
fflush
free
__do_copy_data
__do_clear_bss
