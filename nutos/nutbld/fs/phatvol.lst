GAS LISTING /tmp/ccBmHJyU.s 			page 1


   1               		.file	"phatvol.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.section	.text.PhatVolUnmount,"ax",@progbits
   9               	.global	PhatVolUnmount
  10               		.type	PhatVolUnmount, @function
  11               	PhatVolUnmount:
  12               	/* prologue: function */
  13               	/* frame size = 0 */
  14               	/* stack size = 0 */
  15               	.L__stack_usage = 0
  16 0000 FC01      		movw r30,r24
  17 0002 8189      		ldd r24,Z+17
  18 0004 9289      		ldd r25,Z+18
  19 0006 0097      		sbiw r24,0
  20 0008 01F0      		breq .L2
  21 000a 0E94 0000 		call free
  22               	.L2:
  23 000e 80E0      		ldi r24,0
  24 0010 90E0      		ldi r25,0
  25 0012 0895      		ret
  26               		.size	PhatVolUnmount, .-PhatVolUnmount
  27               		.section	.text.PhatVolMount,"ax",@progbits
  28               	.global	PhatVolMount
  29               		.type	PhatVolMount, @function
  30               	PhatVolMount:
  31 0000 3F92      		push r3
  32 0002 4F92      		push r4
  33 0004 5F92      		push r5
  34 0006 6F92      		push r6
  35 0008 7F92      		push r7
  36 000a 8F92      		push r8
  37 000c 9F92      		push r9
  38 000e AF92      		push r10
  39 0010 BF92      		push r11
  40 0012 CF92      		push r12
  41 0014 DF92      		push r13
  42 0016 EF92      		push r14
  43 0018 FF92      		push r15
  44 001a 0F93      		push r16
  45 001c 1F93      		push r17
  46 001e CF93      		push r28
  47 0020 DF93      		push r29
  48 0022 CDB7      		in r28,__SP_L__
  49 0024 DEB7      		in r29,__SP_H__
  50 0026 6797      		sbiw r28,23
  51 0028 0FB6      		in __tmp_reg__,__SREG__
  52 002a F894      		cli
  53 002c DEBF      		out __SP_H__,r29
  54 002e 0FBE      		out __SREG__,__tmp_reg__
  55 0030 CDBF      		out __SP_L__,r28
  56               	/* prologue: function */
  57               	/* frame size = 23 */
GAS LISTING /tmp/ccBmHJyU.s 			page 2


  58               	/* stack size = 40 */
  59               	.L__stack_usage = 40
  60 0032 6C01      		movw r12,r24
  61 0034 7C8B      		std Y+20,r23
  62 0036 6B8B      		std Y+19,r22
  63 0038 DB01      		movw r26,r22
  64 003a ED90      		ld r14,X+
  65 003c FC90      		ld r15,X
  66 003e 8AE3      		ldi r24,lo8(58)
  67 0040 90E0      		ldi r25,0
  68 0042 4D8B      		std Y+21,r20
  69 0044 0E94 0000 		call malloc
  70 0048 8C01      		movw r16,r24
  71 004a F601      		movw r30,r12
  72 004c 928B      		std Z+18,r25
  73 004e 818B      		std Z+17,r24
  74 0050 4D89      		ldd r20,Y+21
  75 0052 892B      		or r24,r25
  76 0054 01F4      		brne .+2
  77 0056 00C0      		rjmp .L40
  78 0058 8AE3      		ldi r24,lo8(58)
  79 005a D801      		movw r26,r16
  80               		0:
  81 005c 1D92      		st X+,__zero_reg__
  82 005e 8A95      		dec r24
  83 0060 01F4      		brne 0b
  84 0062 4630      		cpi r20,lo8(6)
  85 0064 01F0      		breq .L10
  86 0066 00F4      		brsh .L11
  87 0068 4130      		cpi r20,lo8(1)
  88 006a 01F0      		breq .L12
  89 006c 4430      		cpi r20,lo8(4)
  90 006e 01F4      		brne .L9
  91 0070 00C0      		rjmp .L10
  92               	.L11:
  93 0072 4B30      		cpi r20,lo8(11)
  94 0074 00F0      		brlo .L9
  95 0076 4D30      		cpi r20,lo8(13)
  96 0078 00F0      		brlo .L13
  97 007a 4E30      		cpi r20,lo8(14)
  98 007c 01F0      		breq .L10
  99 007e 00C0      		rjmp .L9
 100               	.L13:
 101 0080 80E2      		ldi r24,lo8(32)
 102 0082 90E0      		ldi r25,0
 103 0084 00C0      		rjmp .L60
 104               	.L10:
 105 0086 80E1      		ldi r24,lo8(16)
 106 0088 90E0      		ldi r25,0
 107 008a D801      		movw r26,r16
 108 008c 8D93      		st X+,r24
 109 008e 9C93      		st X,r25
 110 0090 00C0      		rjmp .L9
 111               	.L12:
 112 0092 8CE0      		ldi r24,lo8(12)
 113 0094 90E0      		ldi r25,0
 114               	.L60:
GAS LISTING /tmp/ccBmHJyU.s 			page 3


 115 0096 F801      		movw r30,r16
 116 0098 9183      		std Z+1,r25
 117 009a 8083      		st Z,r24
 118               	.L9:
 119 009c 8B88      		ldd r8,Y+19
 120 009e 9C88      		ldd r9,Y+20
 121 00a0 9A82      		std Y+2,r9
 122 00a2 8982      		std Y+1,r8
 123 00a4 D701      		movw r26,r14
 124 00a6 5596      		adiw r26,21
 125 00a8 ED91      		ld r30,X+
 126 00aa FC91      		ld r31,X
 127 00ac 5697      		sbiw r26,21+1
 128 00ae AE01      		movw r20,r28
 129 00b0 4F5F      		subi r20,-1
 130 00b2 5F4F      		sbci r21,-1
 131 00b4 62E0      		ldi r22,lo8(2)
 132 00b6 72E1      		ldi r23,lo8(18)
 133 00b8 C701      		movw r24,r14
 134 00ba 1995      		eicall
 135 00bc 892B      		or r24,r25
 136 00be 01F0      		breq .L14
 137 00c0 C801      		movw r24,r16
 138 00c2 0E94 0000 		call free
 139 00c6 00C0      		rjmp .L63
 140               	.L14:
 141 00c8 2B85      		ldd r18,Y+11
 142 00ca 3C85      		ldd r19,Y+12
 143 00cc D801      		movw r26,r16
 144 00ce 1B96      		adiw r26,10+1
 145 00d0 3C93      		st X,r19
 146 00d2 2E93      		st -X,r18
 147 00d4 1A97      		sbiw r26,10
 148 00d6 40E0      		ldi r20,0
 149 00d8 50E0      		ldi r21,0
 150 00da BA01      		movw r22,r20
 151 00dc 8B89      		ldd r24,Y+19
 152 00de 9C89      		ldd r25,Y+20
 153 00e0 0E94 0000 		call PhatSectorRead
 154 00e4 9A8B      		std Y+18,r25
 155 00e6 898B      		std Y+17,r24
 156 00e8 892B      		or r24,r25
 157 00ea 01F0      		breq .L15
 158 00ec C601      		movw r24,r12
 159 00ee 0E94 0000 		call PhatVolUnmount
 160 00f2 00C0      		rjmp .L40
 161               	.L15:
 162 00f4 D801      		movw r26,r16
 163 00f6 1C96      		adiw r26,12
 164 00f8 1D92      		st X+,__zero_reg__
 165 00fa 1D92      		st X+,__zero_reg__
 166 00fc 1D92      		st X+,__zero_reg__
 167 00fe 1C92      		st X,__zero_reg__
 168 0100 1F97      		sbiw r26,12+3
 169 0102 1A96      		adiw r26,10
 170 0104 ED90      		ld r14,X+
 171 0106 FC90      		ld r15,X
GAS LISTING /tmp/ccBmHJyU.s 			page 4


 172 0108 1B97      		sbiw r26,10+1
 173 010a 8D91      		ld r24,X+
 174 010c 9C91      		ld r25,X
 175 010e 1197      		sbiw r26,1
 176 0110 892B      		or r24,r25
 177 0112 01F4      		brne .L16
 178 0114 F701      		movw r30,r14
 179 0116 8189      		ldd r24,Z+17
 180 0118 9289      		ldd r25,Z+18
 181 011a 892B      		or r24,r25
 182 011c 01F4      		brne .L16
 183 011e 80E2      		ldi r24,lo8(32)
 184 0120 90E0      		ldi r25,0
 185 0122 8D93      		st X+,r24
 186 0124 9C93      		st X,r25
 187               	.L16:
 188 0126 D801      		movw r26,r16
 189 0128 8D91      		ld r24,X+
 190 012a 9C91      		ld r25,X
 191 012c 8097      		sbiw r24,32
 192 012e 01F0      		breq .L17
 193 0130 2AE1      		ldi r18,lo8(26)
 194 0132 C701      		movw r24,r14
 195 0134 8496      		adiw r24,36
 196 0136 FC01      		movw r30,r24
 197 0138 D701      		movw r26,r14
 198 013a A05C      		subi r26,-64
 199 013c BF4F      		sbci r27,-1
 200               		0:
 201 013e 0190      		ld r0,Z+
 202 0140 0D92      		st X+,r0
 203 0142 2A95      		dec r18
 204 0144 01F4      		brne 0b
 205 0146 2CE1      		ldi r18,lo8(28)
 206 0148 FC01      		movw r30,r24
 207               		0:
 208 014a 1192      		st Z+,__zero_reg__
 209 014c 2A95      		dec r18
 210 014e 01F4      		brne 0b
 211               	.L17:
 212 0150 D801      		movw r26,r16
 213 0152 1A96      		adiw r26,10
 214 0154 8D91      		ld r24,X+
 215 0156 9C91      		ld r25,X
 216 0158 1B97      		sbiw r26,10+1
 217 015a FC01      		movw r30,r24
 218 015c E250      		subi r30,2
 219 015e FE4F      		sbci r31,-2
 220 0160 2081      		ld r18,Z
 221 0162 2535      		cpi r18,lo8(85)
 222 0164 01F4      		brne .L19
 223 0166 3196      		adiw r30,1
 224 0168 8081      		ld r24,Z
 225 016a 8A3A      		cpi r24,lo8(-86)
 226 016c 01F0      		breq .L59
 227               	.L19:
 228 016e C601      		movw r24,r12
GAS LISTING /tmp/ccBmHJyU.s 			page 5


 229 0170 0E94 0000 		call PhatVolUnmount
 230               	.L63:
 231 0174 83E1      		ldi r24,lo8(19)
 232 0176 90E0      		ldi r25,0
 233 0178 9093 0000 		sts errno+1,r25
 234 017c 8093 0000 		sts errno,r24
 235 0180 00C0      		rjmp .L40
 236               	.L59:
 237 0182 D701      		movw r26,r14
 238 0184 5596      		adiw r26,21
 239 0186 8C91      		ld r24,X
 240 0188 803F      		cpi r24,lo8(-16)
 241 018a 01F0      		breq .L22
 242 018c 883F      		cpi r24,lo8(-8)
 243 018e 00F0      		brlo .L19
 244               	.L22:
 245 0190 F701      		movw r30,r14
 246 0192 6385      		ldd r22,Z+11
 247 0194 7485      		ldd r23,Z+12
 248 0196 D801      		movw r26,r16
 249 0198 5996      		adiw r26,24+1
 250 019a 7C93      		st X,r23
 251 019c 6E93      		st -X,r22
 252 019e 5897      		sbiw r26,24
 253 01a0 6115      		cp r22,__zero_reg__
 254 01a2 B2E0      		ldi r27,2
 255 01a4 7B07      		cpc r23,r27
 256 01a6 00F0      		brlo .L19
 257 01a8 6111      		cpse r22,__zero_reg__
 258 01aa 00C0      		rjmp .L19
 259 01ac 3584      		ldd r3,Z+13
 260 01ae 832D      		mov r24,r3
 261 01b0 90E0      		ldi r25,0
 262 01b2 F801      		movw r30,r16
 263 01b4 938F      		std Z+27,r25
 264 01b6 828F      		std Z+26,r24
 265 01b8 892B      		or r24,r25
 266 01ba 01F0      		breq .L19
 267 01bc D701      		movw r26,r14
 268 01be 5696      		adiw r26,22
 269 01c0 8D91      		ld r24,X+
 270 01c2 9C91      		ld r25,X
 271 01c4 5797      		sbiw r26,22+1
 272 01c6 0097      		sbiw r24,0
 273 01c8 01F0      		breq .L23
 274 01ca A0E0      		ldi r26,0
 275 01cc B0E0      		ldi r27,0
 276 01ce 00C0      		rjmp .L61
 277               	.L23:
 278 01d0 F701      		movw r30,r14
 279 01d2 84A1      		ldd r24,Z+36
 280 01d4 95A1      		ldd r25,Z+37
 281 01d6 A6A1      		ldd r26,Z+38
 282 01d8 B7A1      		ldd r27,Z+39
 283 01da F801      		movw r30,r16
 284               	.L61:
 285 01dc 848F      		std Z+28,r24
GAS LISTING /tmp/ccBmHJyU.s 			page 6


 286 01de 958F      		std Z+29,r25
 287 01e0 A68F      		std Z+30,r26
 288 01e2 B78F      		std Z+31,r27
 289 01e4 D701      		movw r26,r14
 290 01e6 1E96      		adiw r26,14
 291 01e8 4D90      		ld r4,X+
 292 01ea 5C90      		ld r5,X
 293 01ec 1F97      		sbiw r26,14+1
 294 01ee 612C      		mov r6,__zero_reg__
 295 01f0 712C      		mov r7,__zero_reg__
 296 01f2 F801      		movw r30,r16
 297 01f4 40A2      		std Z+32,r4
 298 01f6 51A2      		std Z+33,r5
 299 01f8 62A2      		std Z+34,r6
 300 01fa 73A2      		std Z+35,r7
 301 01fc 5096      		adiw r26,16
 302 01fe 8C91      		ld r24,X
 303 0200 848C      		ldd r8,Z+28
 304 0202 958C      		ldd r9,Z+29
 305 0204 A68C      		ldd r10,Z+30
 306 0206 B78C      		ldd r11,Z+31
 307 0208 8230      		cpi r24,lo8(2)
 308 020a 00F0      		brlo .L25
 309 020c D501      		movw r26,r10
 310 020e C401      		movw r24,r8
 311 0210 840D      		add r24,r4
 312 0212 951D      		adc r25,r5
 313 0214 A61D      		adc r26,r6
 314 0216 B71D      		adc r27,r7
 315 0218 84A3      		std Z+36,r24
 316 021a 95A3      		std Z+37,r25
 317 021c A6A3      		std Z+38,r26
 318 021e B7A3      		std Z+39,r27
 319               	.L25:
 320 0220 D701      		movw r26,r14
 321 0222 5196      		adiw r26,17
 322 0224 8D91      		ld r24,X+
 323 0226 9C91      		ld r25,X
 324 0228 5297      		sbiw r26,17+1
 325 022a 35E0      		ldi r19,5
 326               		1:
 327 022c 880F      		lsl r24
 328 022e 991F      		rol r25
 329 0230 3A95      		dec r19
 330 0232 01F4      		brne 1b
 331 0234 9B01      		movw r18,r22
 332 0236 2150      		subi r18,1
 333 0238 3109      		sbc r19,__zero_reg__
 334 023a 820F      		add r24,r18
 335 023c 931F      		adc r25,r19
 336 023e 0E94 0000 		call __udivmodhi4
 337 0242 7F8B      		std Y+23,r23
 338 0244 6E8B      		std Y+22,r22
 339 0246 F801      		movw r30,r16
 340 0248 71A7      		std Z+41,r23
 341 024a 60A7      		std Z+40,r22
 342 024c D701      		movw r26,r14
GAS LISTING /tmp/ccBmHJyU.s 			page 7


 343 024e 5096      		adiw r26,16
 344 0250 8C91      		ld r24,X
 345 0252 A82F      		mov r26,r24
 346 0254 B0E0      		ldi r27,0
 347 0256 A501      		movw r20,r10
 348 0258 9401      		movw r18,r8
 349 025a 0E94 0000 		call __muluhisi3
 350 025e DC01      		movw r26,r24
 351 0260 CB01      		movw r24,r22
 352 0262 840D      		add r24,r4
 353 0264 951D      		adc r25,r5
 354 0266 A61D      		adc r26,r6
 355 0268 B71D      		adc r27,r7
 356 026a 82A7      		std Z+42,r24
 357 026c 93A7      		std Z+43,r25
 358 026e A4A7      		std Z+44,r26
 359 0270 B5A7      		std Z+45,r27
 360 0272 6080      		ld r6,Z
 361 0274 7180      		ldd r7,Z+1
 362 0276 F0E2      		ldi r31,32
 363 0278 6F16      		cp r6,r31
 364 027a 7104      		cpc r7,__zero_reg__
 365 027c 01F4      		brne .L26
 366 027e F701      		movw r30,r14
 367 0280 44A5      		ldd r20,Z+44
 368 0282 55A5      		ldd r21,Z+45
 369 0284 66A5      		ldd r22,Z+46
 370 0286 77A5      		ldd r23,Z+47
 371 0288 F801      		movw r30,r16
 372 028a 46A7      		std Z+46,r20
 373 028c 57A7      		std Z+47,r21
 374 028e 60AB      		std Z+48,r22
 375 0290 71AB      		std Z+49,r23
 376               	.L26:
 377 0292 8E88      		ldd r8,Y+22
 378 0294 9F88      		ldd r9,Y+23
 379 0296 880D      		add r24,r8
 380 0298 991D      		adc r25,r9
 381 029a A11D      		adc r26,__zero_reg__
 382 029c B11D      		adc r27,__zero_reg__
 383 029e F801      		movw r30,r16
 384 02a0 86AB      		std Z+54,r24
 385 02a2 97AB      		std Z+55,r25
 386 02a4 A0AF      		std Z+56,r26
 387 02a6 B1AF      		std Z+57,r27
 388 02a8 F701      		movw r30,r14
 389 02aa 2389      		ldd r18,Z+19
 390 02ac 3489      		ldd r19,Z+20
 391 02ae 2115      		cp r18,__zero_reg__
 392 02b0 3105      		cpc r19,__zero_reg__
 393 02b2 01F0      		breq .L27
 394 02b4 A901      		movw r20,r18
 395 02b6 60E0      		ldi r22,0
 396 02b8 70E0      		ldi r23,0
 397 02ba 00C0      		rjmp .L62
 398               	.L27:
 399 02bc F701      		movw r30,r14
GAS LISTING /tmp/ccBmHJyU.s 			page 8


 400 02be 40A1      		ldd r20,Z+32
 401 02c0 51A1      		ldd r21,Z+33
 402 02c2 62A1      		ldd r22,Z+34
 403 02c4 73A1      		ldd r23,Z+35
 404               	.L62:
 405 02c6 4A01      		movw r8,r20
 406 02c8 5B01      		movw r10,r22
 407 02ca 881A      		sub r8,r24
 408 02cc 990A      		sbc r9,r25
 409 02ce AA0A      		sbc r10,r26
 410 02d0 BB0A      		sbc r11,r27
 411 02d2 F801      		movw r30,r16
 412 02d4 82AA      		std Z+50,r8
 413 02d6 93AA      		std Z+51,r9
 414 02d8 A4AA      		std Z+52,r10
 415 02da B5AA      		std Z+53,r11
 416 02dc 232D      		mov r18,r3
 417 02de 30E0      		ldi r19,0
 418 02e0 40E0      		ldi r20,0
 419 02e2 50E0      		ldi r21,0
 420 02e4 62A9      		ldd r22,Z+50
 421 02e6 73A9      		ldd r23,Z+51
 422 02e8 84A9      		ldd r24,Z+52
 423 02ea 95A9      		ldd r25,Z+53
 424 02ec 0E94 0000 		call __udivmodsi4
 425 02f0 DA01      		movw r26,r20
 426 02f2 C901      		movw r24,r18
 427 02f4 0296      		adiw r24,2
 428 02f6 A11D      		adc r26,__zero_reg__
 429 02f8 B11D      		adc r27,__zero_reg__
 430 02fa F801      		movw r30,r16
 431 02fc 82AB      		std Z+50,r24
 432 02fe 93AB      		std Z+51,r25
 433 0300 A4AB      		std Z+52,r26
 434 0302 B5AB      		std Z+53,r27
 435 0304 6728      		or r6,r7
 436 0306 01F4      		brne .L29
 437 0308 873F      		cpi r24,-9
 438 030a 9F40      		sbci r25,15
 439 030c A105      		cpc r26,__zero_reg__
 440 030e B105      		cpc r27,__zero_reg__
 441 0310 00F0      		brlo .L30
 442 0312 80E1      		ldi r24,lo8(16)
 443 0314 90E0      		ldi r25,0
 444 0316 D801      		movw r26,r16
 445 0318 8D93      		st X+,r24
 446 031a 9C93      		st X,r25
 447 031c 00C0      		rjmp .L29
 448               	.L30:
 449 031e 8CE0      		ldi r24,lo8(12)
 450 0320 90E0      		ldi r25,0
 451 0322 F801      		movw r30,r16
 452 0324 9183      		std Z+1,r25
 453 0326 8083      		st Z,r24
 454               	.L29:
 455 0328 8B88      		ldd r8,Y+19
 456 032a 9C88      		ldd r9,Y+20
GAS LISTING /tmp/ccBmHJyU.s 			page 9


 457 032c D601      		movw r26,r12
 458 032e 5096      		adiw r26,15+1
 459 0330 9C92      		st X,r9
 460 0332 8E92      		st -X,r8
 461 0334 1F97      		sbiw r26,15
 462 0336 C801      		movw r24,r16
 463 0338 4496      		adiw r24,20
 464 033a 0E94 0000 		call NutEventPost
 465 033e C801      		movw r24,r16
 466 0340 4696      		adiw r24,22
 467 0342 0E94 0000 		call NutEventPost
 468 0346 D601      		movw r26,r12
 469 0348 5196      		adiw r26,17
 470 034a ED90      		ld r14,X+
 471 034c FC90      		ld r15,X
 472 034e 5297      		sbiw r26,17+1
 473 0350 F701      		movw r30,r14
 474 0352 8081      		ld r24,Z
 475 0354 9181      		ldd r25,Z+1
 476 0356 8032      		cpi r24,32
 477 0358 9105      		cpc r25,__zero_reg__
 478 035a 01F4      		brne .L31
 479 035c C601      		movw r24,r12
 480 035e 0E94 0000 		call Phat32FreeClusters
 481 0362 2B01      		movw r4,r22
 482 0364 3C01      		movw r6,r24
 483 0366 00C0      		rjmp .L32
 484               	.L31:
 485 0368 22E0      		ldi r18,lo8(2)
 486 036a 822E      		mov r8,r18
 487 036c 912C      		mov r9,__zero_reg__
 488 036e A12C      		mov r10,__zero_reg__
 489 0370 B12C      		mov r11,__zero_reg__
 490 0372 412C      		mov r4,__zero_reg__
 491 0374 512C      		mov r5,__zero_reg__
 492 0376 3201      		movw r6,r4
 493 0378 4097      		sbiw r24,16
 494 037a 01F0      		breq .+2
 495 037c 00C0      		rjmp .L34
 496               	.L35:
 497 037e F701      		movw r30,r14
 498 0380 82A9      		ldd r24,Z+50
 499 0382 93A9      		ldd r25,Z+51
 500 0384 A4A9      		ldd r26,Z+52
 501 0386 B5A9      		ldd r27,Z+53
 502 0388 8816      		cp r8,r24
 503 038a 9906      		cpc r9,r25
 504 038c AA06      		cpc r10,r26
 505 038e BB06      		cpc r11,r27
 506 0390 00F0      		brlo .+2
 507 0392 00C0      		rjmp .L32
 508 0394 9E01      		movw r18,r28
 509 0396 235F      		subi r18,-13
 510 0398 3F4F      		sbci r19,-1
 511 039a B501      		movw r22,r10
 512 039c A401      		movw r20,r8
 513 039e C601      		movw r24,r12
GAS LISTING /tmp/ccBmHJyU.s 			page 10


 514 03a0 0E94 0000 		call Phat16GetClusterLink
 515 03a4 892B      		or r24,r25
 516 03a6 01F4      		brne .L32
 517 03a8 8D85      		ldd r24,Y+13
 518 03aa 9E85      		ldd r25,Y+14
 519 03ac AF85      		ldd r26,Y+15
 520 03ae B889      		ldd r27,Y+16
 521 03b0 892B      		or r24,r25
 522 03b2 8A2B      		or r24,r26
 523 03b4 8B2B      		or r24,r27
 524 03b6 01F4      		brne .L36
 525 03b8 FFEF      		ldi r31,-1
 526 03ba 4F1A      		sub r4,r31
 527 03bc 5F0A      		sbc r5,r31
 528 03be 6F0A      		sbc r6,r31
 529 03c0 7F0A      		sbc r7,r31
 530               	.L36:
 531 03c2 2FEF      		ldi r18,-1
 532 03c4 821A      		sub r8,r18
 533 03c6 920A      		sbc r9,r18
 534 03c8 A20A      		sbc r10,r18
 535 03ca B20A      		sbc r11,r18
 536 03cc 00C0      		rjmp .L35
 537               	.L39:
 538 03ce 9E01      		movw r18,r28
 539 03d0 235F      		subi r18,-13
 540 03d2 3F4F      		sbci r19,-1
 541 03d4 B501      		movw r22,r10
 542 03d6 A401      		movw r20,r8
 543 03d8 C601      		movw r24,r12
 544 03da 0E94 0000 		call Phat12GetClusterLink
 545 03de 892B      		or r24,r25
 546 03e0 01F4      		brne .L32
 547 03e2 8D85      		ldd r24,Y+13
 548 03e4 9E85      		ldd r25,Y+14
 549 03e6 AF85      		ldd r26,Y+15
 550 03e8 B889      		ldd r27,Y+16
 551 03ea 892B      		or r24,r25
 552 03ec 8A2B      		or r24,r26
 553 03ee 8B2B      		or r24,r27
 554 03f0 01F4      		brne .L38
 555 03f2 FFEF      		ldi r31,-1
 556 03f4 4F1A      		sub r4,r31
 557 03f6 5F0A      		sbc r5,r31
 558 03f8 6F0A      		sbc r6,r31
 559 03fa 7F0A      		sbc r7,r31
 560               	.L38:
 561 03fc 2FEF      		ldi r18,-1
 562 03fe 821A      		sub r8,r18
 563 0400 920A      		sbc r9,r18
 564 0402 A20A      		sbc r10,r18
 565 0404 B20A      		sbc r11,r18
 566               	.L34:
 567 0406 F701      		movw r30,r14
 568 0408 82A9      		ldd r24,Z+50
 569 040a 93A9      		ldd r25,Z+51
 570 040c A4A9      		ldd r26,Z+52
GAS LISTING /tmp/ccBmHJyU.s 			page 11


 571 040e B5A9      		ldd r27,Z+53
 572 0410 8816      		cp r8,r24
 573 0412 9906      		cpc r9,r25
 574 0414 AA06      		cpc r10,r26
 575 0416 BB06      		cpc r11,r27
 576 0418 00F0      		brlo .L39
 577               	.L32:
 578 041a D801      		movw r26,r16
 579 041c 1296      		adiw r26,2
 580 041e 4D92      		st X+,r4
 581 0420 5D92      		st X+,r5
 582 0422 6D92      		st X+,r6
 583 0424 7C92      		st X,r7
 584 0426 1597      		sbiw r26,2+3
 585 0428 00C0      		rjmp .L8
 586               	.L40:
 587 042a EFEF      		ldi r30,lo8(-1)
 588 042c FFEF      		ldi r31,lo8(-1)
 589 042e FA8B      		std Y+18,r31
 590 0430 E98B      		std Y+17,r30
 591               	.L8:
 592 0432 8989      		ldd r24,Y+17
 593 0434 9A89      		ldd r25,Y+18
 594               	/* epilogue start */
 595 0436 6796      		adiw r28,23
 596 0438 0FB6      		in __tmp_reg__,__SREG__
 597 043a F894      		cli
 598 043c DEBF      		out __SP_H__,r29
 599 043e 0FBE      		out __SREG__,__tmp_reg__
 600 0440 CDBF      		out __SP_L__,r28
 601 0442 DF91      		pop r29
 602 0444 CF91      		pop r28
 603 0446 1F91      		pop r17
 604 0448 0F91      		pop r16
 605 044a FF90      		pop r15
 606 044c EF90      		pop r14
 607 044e DF90      		pop r13
 608 0450 CF90      		pop r12
 609 0452 BF90      		pop r11
 610 0454 AF90      		pop r10
 611 0456 9F90      		pop r9
 612 0458 8F90      		pop r8
 613 045a 7F90      		pop r7
 614 045c 6F90      		pop r6
 615 045e 5F90      		pop r5
 616 0460 4F90      		pop r4
 617 0462 3F90      		pop r3
 618 0464 0895      		ret
 619               		.size	PhatVolMount, .-PhatVolMount
 620               		.section	.text.PhatClusterSector,"ax",@progbits
 621               	.global	PhatClusterSector
 622               		.type	PhatClusterSector, @function
 623               	PhatClusterSector:
 624 0000 0F93      		push r16
 625 0002 1F93      		push r17
 626 0004 CF93      		push r28
 627 0006 DF93      		push r29
GAS LISTING /tmp/ccBmHJyU.s 			page 12


 628 0008 00D0      		rcall .
 629 000a 1F92      		push __zero_reg__
 630 000c CDB7      		in r28,__SP_L__
 631 000e DEB7      		in r29,__SP_H__
 632               	/* prologue: function */
 633               	/* frame size = 4 */
 634               	/* stack size = 8 */
 635               	.L__stack_usage = 8
 636 0010 DC01      		movw r26,r24
 637 0012 ED91      		ld r30,X+
 638 0014 FC91      		ld r31,X
 639 0016 0189      		ldd r16,Z+17
 640 0018 1289      		ldd r17,Z+18
 641 001a 4983      		std Y+1,r20
 642 001c 5A83      		std Y+2,r21
 643 001e 6B83      		std Y+3,r22
 644 0020 7C83      		std Y+4,r23
 645 0022 0E94 0000 		call IsFixedRootDir
 646 0026 4981      		ldd r20,Y+1
 647 0028 5A81      		ldd r21,Y+2
 648 002a 6B81      		ldd r22,Y+3
 649 002c 7C81      		ldd r23,Y+4
 650 002e 892B      		or r24,r25
 651 0030 01F0      		breq .L65
 652 0032 F801      		movw r30,r16
 653 0034 62A5      		ldd r22,Z+42
 654 0036 73A5      		ldd r23,Z+43
 655 0038 84A5      		ldd r24,Z+44
 656 003a 95A5      		ldd r25,Z+45
 657 003c 00C0      		rjmp .L66
 658               	.L65:
 659 003e 4230      		cpi r20,2
 660 0040 5105      		cpc r21,__zero_reg__
 661 0042 6105      		cpc r22,__zero_reg__
 662 0044 7105      		cpc r23,__zero_reg__
 663 0046 00F0      		brlo .L67
 664 0048 4250      		subi r20,2
 665 004a 5109      		sbc r21,__zero_reg__
 666 004c 6109      		sbc r22,__zero_reg__
 667 004e 7109      		sbc r23,__zero_reg__
 668               	.L67:
 669 0050 F801      		movw r30,r16
 670 0052 A28D      		ldd r26,Z+26
 671 0054 B38D      		ldd r27,Z+27
 672 0056 9A01      		movw r18,r20
 673 0058 AB01      		movw r20,r22
 674 005a 0E94 0000 		call __muluhisi3
 675 005e 06A9      		ldd r16,Z+54
 676 0060 17A9      		ldd r17,Z+55
 677 0062 20AD      		ldd r18,Z+56
 678 0064 31AD      		ldd r19,Z+57
 679 0066 600F      		add r22,r16
 680 0068 711F      		adc r23,r17
 681 006a 821F      		adc r24,r18
 682 006c 931F      		adc r25,r19
 683               	.L66:
 684               	/* epilogue start */
GAS LISTING /tmp/ccBmHJyU.s 			page 13


 685 006e 0F90      		pop __tmp_reg__
 686 0070 0F90      		pop __tmp_reg__
 687 0072 0F90      		pop __tmp_reg__
 688 0074 0F90      		pop __tmp_reg__
 689 0076 DF91      		pop r29
 690 0078 CF91      		pop r28
 691 007a 1F91      		pop r17
 692 007c 0F91      		pop r16
 693 007e 0895      		ret
 694               		.size	PhatClusterSector, .-PhatClusterSector
 695               		.ident	"GCC: (GNU) 5.3.0"
GAS LISTING /tmp/ccBmHJyU.s 			page 14


DEFINED SYMBOLS
                            *ABS*:0000000000000000 phatvol.c
     /tmp/ccBmHJyU.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccBmHJyU.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccBmHJyU.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccBmHJyU.s:5      *ABS*:000000000000003b __RAMPZ__
     /tmp/ccBmHJyU.s:6      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccBmHJyU.s:7      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccBmHJyU.s:11     .text.PhatVolUnmount:0000000000000000 PhatVolUnmount
     /tmp/ccBmHJyU.s:30     .text.PhatVolMount:0000000000000000 PhatVolMount
     /tmp/ccBmHJyU.s:623    .text.PhatClusterSector:0000000000000000 PhatClusterSector

UNDEFINED SYMBOLS
free
malloc
PhatSectorRead
errno
__udivmodhi4
__muluhisi3
__udivmodsi4
NutEventPost
Phat32FreeClusters
Phat16GetClusterLink
Phat12GetClusterLink
IsFixedRootDir
